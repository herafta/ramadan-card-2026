<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ramadan Greeting Card</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Reem+Kufi:wght@400;700&family=Poppins:wght@400;600&family=Noto+Sans+SC:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-gold: #c5a059;
            --bright-gold: #ffd700;
            --dark-blue: #0f172a;
            --accent-green: #10b981;
            --text-light: #f8fafc;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Reem Kufi', 'Poppins', 'Noto Sans SC', 'Noto Sans JP', sans-serif;
            background-color: var(--dark-blue);
            background-image: radial-gradient(circle at 50% 10%, #1e293b 0%, #0f172a 100%);
            color: var(--text-light);
            overflow-x: hidden;
            min-height: 100vh;
            padding-bottom: 40px;
            transition: all 0.3s ease;
        }

        /* --- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ© --- */
        .lang-switch {
            position: absolute; top: 50px; left: 20px; z-index: 100;
        }
        html[dir="rtl"] .lang-switch { left: 20px; right: auto; }
        html[dir="ltr"] .lang-switch { right: 20px; left: auto; }

        select {
            background: rgba(0,0,0,0.6); color: #fff; border: 1px solid var(--primary-gold);
            padding: 5px 10px; border-radius: 20px; font-family: inherit; cursor: pointer; outline: none;
            font-size: 0.9rem;
        }

        /* --- Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± --- */
        .news-ticker {
            background: linear-gradient(90deg, #b8860b, #daa520);
            color: #000; padding: 8px 0; font-weight: bold;
            font-family: 'Amiri', 'Poppins', serif; position: fixed; top: 0; width: 100%; z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3); font-size: 0.9rem;
        }
        .ticker-content { white-space: nowrap; display: inline-block; padding-left: 100%; }
        
        /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ© Ù„Ù„Ø¹Ø±Ø¨ÙŠØ© Ù„ØªÙƒÙˆÙ† Ù…Ù† Ø§Ù„ÙŠØ³Ø§Ø± Ù„Ù„ÙŠÙ…ÙŠÙ† */
        .ticker-rtl { 
            animation: ticker-rtl-move 25s linear infinite; 
            direction: ltr; /* Ù…Ù‡Ù… Ù„Ø¶Ø¨Ø· Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù†Øµ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø´Ø±ÙŠØ· */
            float: left;
        }
        
        .ticker-ltr { animation: ticker-ltr-move 25s linear infinite; }

        /* Ø­Ø±ÙƒØ© Ù…Ù† Ø§Ù„ÙŠØ³Ø§Ø± Ø¥Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† (Ù„Ù„Ø¹Ø±Ø¨ÙŠØ©) */
        @keyframes ticker-rtl-move { 
            0% { transform: translateX(-100%); } 
            100% { transform: translateX(100%); } 
        }

        /* Ø­Ø±ÙƒØ© Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± (Ù„Ù„Ø¨Ù‚ÙŠØ©) */
        @keyframes ticker-ltr-move { 
            0% { transform: translateX(100%); } 
            100% { transform: translateX(-100%); } 
        }

        /* --- Ø§Ù„ÙÙˆØ§Ù†ÙŠØ³ --- */
        .lanterns-container {
            position: absolute; top: 40px; width: 100%;
            display: flex; justify-content: space-between; padding: 0 10px;
            z-index: 5; pointer-events: none;
        }
        .lantern { width: 60px; height: auto; transform-origin: top center; filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.5)); }
        .l-left { animation: swing 3s infinite alternate; margin-left: 5%; }
        .l-right { animation: swing 4s infinite alternate; margin-right: 5%; width: 80px; }
        .l-center { animation: swing 5s infinite alternate; width: 50px; position: absolute; left: 50%; transform: translateX(-50%); top: -10px;}
        @keyframes swing { 0% { transform: rotate(5deg); } 100% { transform: rotate(-5deg); } }

        /* --- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ --- */
        .main-container {
            position: relative; z-index: 10; max-width: 800px;
            margin: 100px auto 40px; text-align: center; padding: 20px;
        }

        .moon-icon {
            font-size: 5rem; color: var(--bright-gold);
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
            animation: float 6s infinite; margin-bottom: 20px; display: inline-block;
        }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }

        h1 {
            font-family: 'Amiri', 'Poppins', 'Noto Sans SC', serif; font-size: 3rem; color: var(--bright-gold);
            margin-bottom: 10px; text-shadow: 2px 2px 4px #000;
        }

        /* --- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© --- */
        .greeting-card {
            background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px);
            border: 2px solid var(--primary-gold); border-radius: 20px;
            padding: 30px; margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .greeting-label { font-size: 1rem; color: #cbd5e1; margin-bottom: 5px; opacity: 0.8; }
        .recipient-name {
            font-size: 2.5rem; color: var(--accent-green);
            font-family: 'Amiri', 'Poppins', 'Noto Sans SC', serif; margin-bottom: 15px; display: block;
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
            word-break: break-word;
        }
        .dua-text { font-size: 1.2rem; line-height: 1.6; margin: 20px 0; color: #e2e8f0; font-style: italic; }
        .sender-section { margin-top: 25px; border-top: 1px solid rgba(197, 160, 89, 0.3); padding-top: 15px; }
        .sender-name { color: var(--primary-gold); font-family: 'Amiri', 'Poppins', serif; font-size: 1.4rem; font-weight: bold; }

        /* --- Ø§Ù„Ø´Ø¨ÙƒØ© (Ù†ÙØ­Ø§ØªØŒ Ù†ØµØ§Ø¦Ø­) --- */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .feature-card {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(197, 160, 89, 0.3);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: transform 0.3s;
        }
        .feature-card:hover { transform: translateY(-3px); border-color: var(--primary-gold); }

        .feature-icon { font-size: 1.8rem; margin-bottom: 10px; }
        .feature-title { color: var(--primary-gold); font-size: 1rem; font-weight: bold; margin-bottom: 8px; font-family: 'Amiri', 'Poppins', serif;}
        .feature-text { font-size: 0.9rem; line-height: 1.4; opacity: 0.9; min-height: 40px; display: flex; align-items: center; justify-content: center;}

        /* Ø§Ù„Ù…Ø³Ø¨Ø­Ø© */
        .tasbih-card { cursor: pointer; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(0,0,0,0.3)); }
        .tasbih-card:active { transform: scale(0.95); }
        .counter-circle {
            width: 60px; height: 60px; border-radius: 50%;
            border: 2px solid var(--accent-green);
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; font-weight: bold; color: var(--text-light);
            margin-top: 5px; background: rgba(0,0,0,0.2);
        }

        /* --- Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ… --- */
        .controls {
            margin-top: 20px; background: rgba(0,0,0,0.4); padding: 25px;
            border-radius: 15px; border: 1px solid rgba(255, 215, 0, 0.1);
        }
        .input-group { margin-bottom: 15px; }
        html[dir="rtl"] .input-group { text-align: right; }
        html[dir="ltr"] .input-group { text-align: left; }
        .input-label { color: var(--primary-gold); font-size: 0.9rem; margin-bottom: 5px; display: block; }
        input[type="text"] {
            width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--primary-gold);
            background: rgba(255,255,255,0.1); color: #fff;
            font-family: inherit; font-size: 1.1rem; text-align: center;
        }
        .btn-group { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 20px; }
        button {
            padding: 12px 30px; border: none; border-radius: 8px; cursor: pointer;
            font-family: inherit; font-weight: bold; font-size: 1rem;
            display: flex; align-items: center; justify-content: center; gap: 8px; min-width: 150px;
        }
        .btn-generate { background: linear-gradient(45deg, var(--primary-gold), #daa520); color: #000; }
        .btn-share { background: var(--accent-green); color: #fff; }

        #toast {
            visibility: hidden; min-width: 250px; background-color: #333; color: #fff;
            text-align: center; border-radius: 8px; padding: 16px; position: fixed;
            z-index: 2000; left: 50%; bottom: 30px; transform: translateX(-50%);
            border-bottom: 4px solid var(--accent-green);
        }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }
        
        .lantern-svg { fill: rgba(255, 215, 0, 0.8); }

        @media (max-width: 600px) {
            h1 { font-size: 2.2rem; }
            .lantern { width: 45px; } .l-right { width: 65px; }
            button { width: 100%; }
            .features-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div class="lang-switch">
        <select id="languageSelector" onchange="changeLanguage(this.value)">
            <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
            <option value="en">ğŸ‡¬ğŸ‡§ English</option>
            <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
            <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
            <option value="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
            <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
            <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
            <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
        </select>
    </div>

    <div class="news-ticker">
        <div class="ticker-content" id="tickerText"></div>
    </div>

    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; opacity: 0.1; background-image: url('data:image/svg+xml,%3Csvg width=\'60\' height=\'60\' viewBox=\'0 0 60 60\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cg fill=\'none\' fill-rule=\'evenodd\'%3E%3Cg fill=\'%23c5a059\' fill-opacity=\'1\'%3E%3Cpath d=\'M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');"></div>

    <div class="lanterns-container">
        <div class="lantern l-left"><svg viewBox="0 0 100 200" class="lantern-svg"><path d="M50,0 L50,20 M20,20 L80,20 L90,60 L10,60 L20,20 M10,60 L90,60 L80,150 L20,150 L10,60 M40,150 L40,180 M60,150 L60,180 M30,180 L70,180" stroke="#ffd700" stroke-width="2" fill="rgba(255,215,0,0.2)"/><circle cx="50" cy="100" r="15" fill="#ffd700" filter="blur(5px)"/></svg></div>
        <div class="lantern l-center"><svg viewBox="0 0 100 200" class="lantern-svg"><path d="M50,0 L50,30 M30,30 L70,30 L80,70 L20,70 L30,30 M20,70 L80,70 L70,140 L30,140 L20,70 M45,140 L45,170 M55,140 L55,170 M35,170 L65,170" stroke="#ffd700" stroke-width="2" fill="rgba(255,215,0,0.2)"/><circle cx="50" cy="100" r="10" fill="#ffd700" filter="blur(5px)"/></svg></div>
        <div class="lantern l-right"><svg viewBox="0 0 100 200" class="lantern-svg"><path d="M50,0 L50,20 M20,20 L80,20 L90,60 L10,60 L20,20 M10,60 L90,60 L80,150 L20,150 L10,60 M40,150 L40,180 M60,150 L60,180 M30,180 L70,180" stroke="#ffd700" stroke-width="2" fill="rgba(255,215,0,0.2)"/><circle cx="50" cy="100" r="15" fill="#ffd700" filter="blur(5px)"/></svg></div>
    </div>

    <div class="main-container">
        <div class="moon-icon">ğŸŒ™</div>
        <h1 id="mainTitle">Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ</h1>
        <p id="subTitle" style="font-size: 1.2rem; opacity: 0.8;">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø´Ù‡Ø± Ø§Ù„Ø®ÙŠØ± ÙˆØ§Ù„Ø±Ø­Ù…Ø©</p>

        <div class="greeting-card" id="cardArea">
            <p class="greeting-label" id="toLabel">Ø¥Ù„Ù‰ Ø§Ù„ØºØ§Ù„ÙŠ/Ø©:</p>
            <span class="recipient-name" id="displayRecipient">Ø²Ø§Ø¦Ø±Ù†Ø§ Ø§Ù„ÙƒØ±ÙŠÙ…</span>
            
            <hr style="border-color: rgba(255,215,0,0.3); margin: 10px 0;">
            
            <p class="dua-text" id="randomDua">...</p>
            
            <div class="sender-section">
                <p class="greeting-label" id="fromLabel">Ù…Ù†:</p>
                <span class="sender-name" id="displaySender">ÙØ§Ø¹Ù„ Ø®ÙŠØ±</span>
            </div>
            
            <p id="footerText" style="font-size: 0.9rem; color: var(--primary-gold); margin-top: 15px;">ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ… Ø¨Ø®ÙŠØ±</p>
        </div>

        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">âœ¨</div>
                <div class="feature-title" id="titleNafahat">Ù†ÙØ­Ø§Øª</div>
                <div class="feature-text" id="textNafahat">...</div>
            </div>

            <div class="feature-card">
                <div class="feature-icon">ğŸ’¡</div>
                <div class="feature-title" id="titleAdvice">Ù†ØµÙŠØ­Ø© Ø±Ù…Ø¶Ø§Ù†ÙŠØ©</div>
                <div class="feature-text" id="textAdvice">...</div>
            </div>

            <div class="feature-card tasbih-card" onclick="incrementTasbih()">
                <div class="feature-title" id="titleTasbih" style="margin-bottom:0">Ù…Ø³Ø¨Ø­Ø©</div>
                <div class="counter-circle" id="tasbihCount">0</div>
                <small style="opacity:0.7; margin-top:5px; font-size:0.8rem" id="tapText">Ø§Ø¶ØºØ· Ù„Ù„ØªØ³Ø¨ÙŠØ­</small>
            </div>
        </div>

        <div class="controls">
            <h3 id="controlsTitle" style="margin-bottom: 20px; color: var(--bright-gold);">ğŸ‘‡ Ø£Ù†Ø´Ø¦ Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©</h3>
            
            <div class="input-group">
                <label class="input-label" id="labelSenderInput">Ø§Ø³Ù…Ùƒ (Ø§Ù„Ù…Ø±Ø³Ù„):</label>
                <input type="text" id="senderInput" oninput="updateCardLive()" autocomplete="off">
            </div>

            <div class="input-group">
                <label class="input-label" id="labelRecipientInput">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„:</label>
                <input type="text" id="recipientInput" oninput="updateCardLive()" autocomplete="off">
            </div>

            <div class="btn-group">
                <button class="btn-generate" onclick="randomizeAll()">
                    <span>âœ¨</span> <span id="btnDuaText">Ø¯Ø¹Ø§Ø¡ Ø¬Ø¯ÙŠØ¯</span>
                </button>
                <button class="btn-share" onclick="shareGreeting()">
                    <span>ğŸ”—</span> <span id="btnShareText">Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ‡Ù†Ø¦Ø©</span>
                </button>
            </div>
        </div>
    </div>

    <div id="toast">ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!</div>

    <script>
        const content = {
            ar: {
                dir: "rtl",
                title: "Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ",
                subTitle: "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø´Ù‡Ø± Ø§Ù„Ø®ÙŠØ± ÙˆØ§Ù„Ø±Ø­Ù…Ø©",
                ticker: "ğŸŒ™ ØªÙ‡Ù†Ø¦Ø© Ø®Ø§ØµØ© Ø¨Ù…Ù†Ø§Ø³Ø¨Ø© Ø­Ù„ÙˆÙ„ Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ Ù…Ù† Ø§Ù„Ù…ØµÙ…Ù… ÙŠÙˆÙ†Ø³ Ø§Ù„Ø´ÙŠØ® Ø£Ø¨Ùˆ ØªÙŠÙ… | ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†Ø§ ÙˆÙ…Ù†ÙƒÙ… ØµØ§Ù„Ø­ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ğŸŒ™",
                to: "Ø¥Ù„Ù‰ Ø§Ù„ØºØ§Ù„ÙŠ/Ø©:",
                from: "Ù…Ù†:",
                defaultSender: "ÙØ§Ø¹Ù„ Ø®ÙŠØ±",
                defaultRecipient: "Ø²Ø§Ø¦Ø±Ù†Ø§ Ø§Ù„ÙƒØ±ÙŠÙ…",
                footer: "ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ… Ø¨Ø®ÙŠØ±",
                controlsTitle: "ğŸ‘‡ Ø£Ù†Ø´Ø¦ Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©",
                labelSender: "Ø§Ø³Ù…Ùƒ (Ø§Ù„Ù…Ø±Ø³Ù„):",
                labelRecipient: "Ø§Ø³Ù… Ù…Ù† ØªØ­Ø¨ (Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„):",
                placeholderSender: "Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ØŒ Ø£Ù…ÙŠ...",
                placeholderRecipient: "Ù…Ø«Ø§Ù„: Ø®Ø§Ù„Ø¯ØŒ Ø£Ø¨ÙŠ...",
                btnDua: "ØªØ­Ø¯ÙŠØ« Ø´Ø§Ù…Ù„",
                btnShare: "Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ‡Ù†Ø¦Ø©",
                toast: "ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·! Ø£Ø±Ø³Ù„Ù‡ Ù„Ù…Ù† ØªØ­Ø¨.",
                shareMsg: "ğŸŒ™ ØªÙ‡Ù†Ø¦Ø© Ø®Ø§ØµØ© Ø¨Ù…Ù†Ø§Ø³Ø¨Ø© Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ",
                titleNafahat: "Ù†ÙØ­Ø§Øª",
                titleAdvice: "Ù†ØµÙŠØ­Ø© Ø±Ù…Ø¶Ø§Ù†ÙŠØ©",
                titleTasbih: "Ù…Ø³Ø¨Ø­Ø©",
                tapText: "Ø§Ø¶ØºØ· Ù„Ù„ØªØ³Ø¨ÙŠØ­",
                duas: ["Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø¹ØªÙ‚Ø§Ø¦Ùƒ Ù…Ù† Ø§Ù„Ù†Ø§Ø±.", "Ù…Ø¨Ø§Ø±Ùƒ Ø¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø´Ù‡Ø±ØŒ Ø£Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ø£Ù† ÙŠØ¹ÙŠÙ†ÙƒÙ… Ø¹Ù„Ù‰ ØµÙŠØ§Ù…Ù‡.", "Ø§Ù„Ù„Ù‡Ù… Ø³Ù„Ù…Ù†Ø§ Ù„Ø±Ù…Ø¶Ø§Ù†ØŒ ÙˆØ³Ù„Ù… Ø±Ù…Ø¶Ø§Ù† Ù„Ù†Ø§."],
                nafahatList: ["Ø§Ù„ØµÙˆÙ… ØªØ±Ø¨ÙŠØ© Ù„Ù„Ø¥Ø±Ø§Ø¯Ø©.", "Ø±Ù…Ø¶Ø§Ù† ÙØ±ØµØ© Ù„Ù„ØªØºÙŠÙŠØ±.", "Ø§Ù„Ù‚Ø±Ø¢Ù† Ø±ÙˆØ­ Ø±Ù…Ø¶Ø§Ù†."],
                adviceList: ["Ù„Ø§ ØªÙƒØ«Ø± Ù…Ù† Ø§Ù„Ø·Ø¹Ø§Ù… Ø¹Ù†Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.", "Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ ØµÙ„Ø§Ø© Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­.", "Ø®ØµØµ ÙˆÙ‚ØªØ§Ù‹ Ù„Ù„Ø¯Ø¹Ø§Ø¡."]
            },
            en: {
                dir: "ltr",
                title: "Ramadan Mubarak",
                subTitle: "Welcome to the month of mercy",
                ticker: "ğŸŒ™ Special Greeting for Ramadan by Younes Al-Sheikh Abu Taym | May Allah accept our good deeds ğŸŒ™",
                to: "To:",
                from: "From:",
                defaultSender: "A Well Wisher",
                defaultRecipient: "Dear Guest",
                footer: "Happy Ramadan",
                controlsTitle: "ğŸ‘‡ Create your card",
                labelSender: "Your Name:",
                labelRecipient: "Recipient Name:",
                placeholderSender: "e.g. Ahmed...",
                placeholderRecipient: "e.g. John...",
                btnDua: "Refresh All",
                btnShare: "Share Greeting",
                toast: "Link copied!",
                shareMsg: "ğŸŒ™ Special Ramadan Greeting",
                titleNafahat: "Inspiration",
                titleAdvice: "Ramadan Tip",
                titleTasbih: "Tasbih",
                tapText: "Tap to count",
                duas: ["May Allah accept your fasting.", "Wishing you a blessed Ramadan.", "May this Ramadan bring joy."],
                nafahatList: ["Fasting is discipline.", "Ramadan is a chance for change.", "Quran is the soul of Ramadan."],
                adviceList: ["Don't overeat at Iftar.", "Maintain Taraweeh prayers.", "Make Dua frequently."]
            },
            fr: {
                dir: "ltr",
                title: "Ramadan Mubarak",
                subTitle: "Bienvenue au mois de la misÃ©ricorde",
                ticker: "ğŸŒ™ Voeux spÃ©ciaux pour le Ramadan par Younes Al-Sheikh Abu Taym | Qu'Allah accepte nos bonnes actions ğŸŒ™",
                to: "Pour:",
                from: "De:",
                defaultSender: "Un Ami",
                defaultRecipient: "Cher InvitÃ©",
                footer: "Joyeux Ramadan",
                controlsTitle: "ğŸ‘‡ CrÃ©ez votre carte",
                labelSender: "Votre Nom:",
                labelRecipient: "Nom du Destinataire:",
                placeholderSender: "ex: Ahmed...",
                placeholderRecipient: "ex: Marie...",
                btnDua: "Actualiser",
                btnShare: "Partager",
                toast: "Lien copiÃ© !",
                shareMsg: "ğŸŒ™ Voeux SpÃ©ciaux Ramadan",
                titleNafahat: "Inspiration",
                titleAdvice: "Conseil Ramadan",
                titleTasbih: "Tasbih",
                tapText: "Appuyez pour compter",
                duas: ["Qu'Allah accepte votre jeÃ»ne.", "Je vous souhaite un Ramadan bÃ©ni.", "Que ce Ramadan apporte la joie."],
                nafahatList: ["Le jeÃ»ne est une discipline.", "Le Ramadan est une chance de changement.", "Le Coran est l'Ã¢me du Ramadan."],
                adviceList: ["Ne mangez pas trop Ã  l'Iftar.", "Maintenez les priÃ¨res de Tarawih.", "Faites des Dua frÃ©quemment."]
            },
            es: {
                dir: "ltr",
                title: "RamadÃ¡n Mubarak",
                subTitle: "Bienvenido el mes de la misericordia",
                ticker: "ğŸŒ™ Saludos especiales de RamadÃ¡n por Younes Al-Sheikh Abu Taym | Que Allah acepte nuestras buenas acciones ğŸŒ™",
                to: "Para:",
                from: "De:",
                defaultSender: "Un Amigo",
                defaultRecipient: "Querido Invitado",
                footer: "Feliz RamadÃ¡n",
                controlsTitle: "ğŸ‘‡ Crea tu tarjeta",
                labelSender: "Tu Nombre:",
                labelRecipient: "Nombre del Destinatario:",
                placeholderSender: "ej: Ahmed...",
                placeholderRecipient: "ej: Juan...",
                btnDua: "Actualizar",
                btnShare: "Compartir",
                toast: "Â¡Enlace copiado!",
                shareMsg: "ğŸŒ™ Saludos Especiales de RamadÃ¡n",
                titleNafahat: "InspiraciÃ³n",
                titleAdvice: "Consejo de RamadÃ¡n",
                titleTasbih: "Tasbih",
                tapText: "Toca para contar",
                duas: ["Que Allah acepte tu ayuno.", "Te deseo un bendito RamadÃ¡n.", "Que este RamadÃ¡n traiga alegrÃ­a."],
                nafahatList: ["El ayuno es disciplina.", "RamadÃ¡n es una oportunidad de cambio.", "El CorÃ¡n es el alma del RamadÃ¡n."],
                adviceList: ["No comas en exceso en Iftar.", "MantÃ©n las oraciones de Tarawih.", "Haz Dua frecuentemente."]
            },
            zh: {
                dir: "ltr",
                title: "æ–‹æœˆå‰åº†",
                subTitle: "æ¬¢è¿æ¥åˆ°æ…ˆæ‚¯ä¹‹æœˆ",
                ticker: "ğŸŒ™ Younes Al-Sheikh Abu Taym çš„æ–‹æœˆç‰¹åˆ«ç¥ç¦ | æ„¿çœŸä¸»ä»¥æ­¤å›èµæˆ‘ä»¬ ğŸŒ™",
                to: "è‡´:",
                from: "æ¥è‡ª:",
                defaultSender: "æœ‹å‹",
                defaultRecipient: "è´µå®¢",
                footer: "æ–‹æœˆå¿«ä¹",
                controlsTitle: "ğŸ‘‡ åˆ¶ä½œä½ çš„è´ºå¡",
                labelSender: "ä½ çš„åå­—:",
                labelRecipient: "æ”¶ä»¶äººåå­—:",
                placeholderSender: "ä¾‹å¦‚: è‰¾å“ˆè¿ˆå¾·...",
                placeholderRecipient: "ä¾‹å¦‚: é˜¿é‡Œ...",
                btnDua: "åˆ·æ–°",
                btnShare: "åˆ†äº«ç¥ç¦",
                toast: "é“¾æ¥å·²å¤åˆ¶ï¼",
                shareMsg: "ğŸŒ™ æ–‹æœˆç‰¹åˆ«ç¥ç¦",
                titleNafahat: "çµæ„Ÿ",
                titleAdvice: "æ–‹æœˆå»ºè®®",
                titleTasbih: "èµä»¥æ­¤",
                tapText: "ç‚¹å‡»è®¡æ•°",
                duas: ["æ„¿çœŸä¸»æ¥å—ä½ çš„æ–‹æˆ’ã€‚", "ç¥ä½ æ–‹æœˆå‰åº†ã€‚", "æ„¿è¿™ä¸ªæ–‹æœˆå¸¦æ¥å–œæ‚¦ã€‚"],
                nafahatList: ["æ–‹æˆ’æ˜¯è‡ªå¾‹ã€‚", "æ–‹æœˆæ˜¯æ”¹å˜çš„æœºä¼šã€‚", "å¤å…°ç»æ˜¯æ–‹æœˆçš„çµé­‚ã€‚"],
                adviceList: ["å¼€æ–‹æ—¶ä¸è¦æš´é¥®æš´é£Ÿã€‚", "åšæŒæ³°æ‹‰å¨ç¤¼æ‹œã€‚", "ç»å¸¸åšæœé˜¿ã€‚"]
            },
            ja: {
                dir: "ltr",
                title: "ãƒ©ãƒãƒ€ãƒ³ãƒ»ãƒ ãƒãƒ©ã‚¯",
                subTitle: "æ…ˆæ‚²ã®æœˆã¸ã‚ˆã†ã“ã",
                ticker: "ğŸŒ™ Younes Al-Sheikh Abu Taym ã‹ã‚‰ã®ç‰¹åˆ¥ãªãƒ©ãƒãƒ€ãƒ³ã®æŒ¨æ‹¶ | ã‚¢ãƒƒãƒ©ãƒ¼ãŒç§ãŸã¡ã®å–„è¡Œã‚’å—ã‘å…¥ã‚Œã¾ã™ã‚ˆã†ã« ğŸŒ™",
                to: "ã¸:",
                from: "ã‹ã‚‰:",
                defaultSender: "å‹äºº",
                defaultRecipient: "ã‚²ã‚¹ãƒˆ",
                footer: "ãƒ©ãƒãƒ€ãƒ³ãŠã‚ã§ã¨ã†",
                controlsTitle: "ğŸ‘‡ ã‚«ãƒ¼ãƒ‰ã‚’ä½œæˆ",
                labelSender: "ã‚ãªãŸã®åå‰:",
                labelRecipient: "å—å–äººã®åå‰:",
                placeholderSender: "ä¾‹: ã‚¢ãƒ•ãƒ¡ãƒ‰...",
                placeholderRecipient: "ä¾‹: ã‚¿ãƒŠã‚«...",
                btnDua: "æ›´æ–°",
                btnShare: "å…±æœ‰",
                toast: "ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼",
                shareMsg: "ğŸŒ™ ç‰¹åˆ¥ãªãƒ©ãƒãƒ€ãƒ³ã®æŒ¨æ‹¶",
                titleNafahat: "ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",
                titleAdvice: "ãƒ©ãƒãƒ€ãƒ³ã®ãƒ’ãƒ³ãƒˆ",
                titleTasbih: "ã‚¿ã‚¹ãƒ“ãƒ¼",
                tapText: "ã‚¿ãƒƒãƒ—ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆ",
                duas: ["ã‚¢ãƒƒãƒ©ãƒ¼ãŒã‚ãªãŸã®æ–­é£Ÿã‚’å—ã‘å…¥ã‚Œã¾ã™ã‚ˆã†ã«ã€‚", "ç¥ç¦ã•ã‚ŒãŸãƒ©ãƒãƒ€ãƒ³ã‚’ãŠç¥ˆã‚Šã—ã¾ã™ã€‚", "ã“ã®ãƒ©ãƒãƒ€ãƒ³ãŒå–œã³ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã‚ˆã†ã«ã€‚"],
                nafahatList: ["æ–­é£Ÿã¯è¦å¾‹ã§ã™ã€‚", "ãƒ©ãƒãƒ€ãƒ³ã¯å¤‰åŒ–ã®æ©Ÿä¼šã§ã™ã€‚", "ã‚³ãƒ¼ãƒ©ãƒ³ã¯ãƒ©ãƒãƒ€ãƒ³ã®é­‚ã§ã™ã€‚"],
                adviceList: ["ã‚¤ãƒ•ã‚¿ãƒ¼ãƒ«ã§é£Ÿã¹éããªã„ã§ãã ã•ã„ã€‚", "ã‚¿ãƒ©ã‚¦ã‚£ãƒ¼ã®ç¥ˆã‚Šã‚’ç¶šã‘ã¦ãã ã•ã„ã€‚", "é »ç¹ã«ãƒ‰ã‚¥ã‚¢ã‚’ã—ã¦ãã ã•ã„ã€‚"]
            },
            tr: {
                dir: "ltr",
                title: "HayÄ±rlÄ± Ramazanlar",
                subTitle: "Rahmet ve bereket ayÄ± hoÅŸ geldin",
                ticker: "ğŸŒ™ TasarÄ±mcÄ± Younes Al-Sheikh Abu Taym'dan Ã–zel Ramazan TebriÄŸi | Allah dualarÄ±mÄ±zÄ± kabul etsin ğŸŒ™",
                to: "SayÄ±n:",
                from: "GÃ¶nderen:",
                defaultSender: "Bir Dost",
                defaultRecipient: "DeÄŸerli Misafir",
                footer: "BayramÄ±nÄ±z MÃ¼barek Olsun",
                controlsTitle: "ğŸ‘‡ KartÄ±nÄ± oluÅŸtur",
                labelSender: "AdÄ±nÄ±z:",
                labelRecipient: "AlÄ±cÄ± AdÄ±:",
                placeholderSender: "Ã–rn: Ahmet...",
                placeholderRecipient: "Ã–rn: Mehmet...",
                btnDua: "Yenile",
                btnShare: "PaylaÅŸ",
                toast: "Link kopyalandÄ±!",
                shareMsg: "ğŸŒ™ Ã–zel Ramazan TebriÄŸi",
                titleNafahat: "Ä°lham",
                titleAdvice: "Ramazan Tavsiyesi",
                titleTasbih: "Tesbih",
                tapText: "Saymak iÃ§in dokun",
                duas: ["Allah oruÃ§larÄ±mÄ±zÄ± kabul etsin.", "Ramazan bereketi evinize dolsun.", "HayÄ±rlÄ± Ramazanlar dilerim."],
                nafahatList: ["OruÃ§ sabÄ±rdÄ±r.", "Ramazan yenilenme fÄ±rsatÄ±dÄ±r.", "Kuran Ramazan'Ä±n kalbidir."],
                adviceList: ["Ä°ftarda aÅŸÄ±rÄ± yemeyin.", "Teravih namazlarÄ±nÄ± aksatmayÄ±n.", "Bol bol dua edin."]
            },
            de: {
                dir: "ltr",
                title: "Ramadan Mubarak",
                subTitle: "Willkommen im Monat der Barmherzigkeit",
                ticker: "ğŸŒ™ Besondere GrÃ¼ÃŸe zum Ramadan von Younes Al-Sheikh Abu Taym ğŸŒ™",
                to: "FÃ¼r:",
                from: "Von:",
                defaultSender: "Ein Freund",
                defaultRecipient: "Gast",
                footer: "Frohen Ramadan",
                controlsTitle: "ğŸ‘‡ Karte erstellen",
                labelSender: "Dein Name:",
                labelRecipient: "EmpfÃ¤ngername:",
                placeholderSender: "z.B. Ahmed...",
                placeholderRecipient: "z.B. Lukas...",
                btnDua: "Aktualisieren",
                btnShare: "Teilen",
                toast: "Link kopiert!",
                shareMsg: "ğŸŒ™ Ramadan GrÃ¼ÃŸe",
                titleNafahat: "Inspiration",
                titleAdvice: "Ramadan Tipp",
                titleTasbih: "Tasbih",
                tapText: "Tippen zum ZÃ¤hlen",
                duas: ["MÃ¶ge Allah dein Fasten annehmen.", "Gesegneten Ramadan.", "Frieden sei mit dir."],
                nafahatList: ["Fasten ist Geduld.", "Ramadan ist eine Chance.", "Der Koran ist die Seele."],
                adviceList: ["Iss nicht zu viel.", "Verrichte das Tarawih.", "Bitte Allah oft."]
            }
        };

        let currentLang = 'ar';
        let tasbihCount = 0;

        document.addEventListener("DOMContentLoaded", function() {
            initPage();
        });

        function initPage() {
            const urlParams = new URLSearchParams(window.location.search);
            const langParam = urlParams.get('lang');
            
            if (langParam && content[langParam]) {
                currentLang = langParam;
                document.getElementById('languageSelector').value = currentLang;
            }

            changeLanguage(currentLang);

            let sharedSender = urlParams.get('sender');
            let sharedRecipient = urlParams.get('recipient');

            const senderInput = document.getElementById('senderInput');
            const recipientInput = document.getElementById('recipientInput');
            
            if (sharedSender) try { senderInput.value = decodeURIComponent(sharedSender); } catch(e) {}
            if (sharedRecipient) try { recipientInput.value = decodeURIComponent(sharedRecipient); } catch(e) {}

            updateCardLive();
            randomizeAll();
        }

        function changeLanguage(lang) {
            currentLang = lang;
            const t = content[lang];
            
            document.documentElement.dir = t.dir;
            document.documentElement.lang = lang;

            document.getElementById('tickerText').textContent = t.ticker;
            document.getElementById('tickerText').className = `ticker-content ${t.dir === 'rtl' ? 'ticker-rtl' : 'ticker-ltr'}`;
            
            document.getElementById('mainTitle').textContent = t.title;
            document.getElementById('subTitle').textContent = t.subTitle;
            document.getElementById('toLabel').textContent = t.to;
            document.getElementById('fromLabel').textContent = t.from;
            document.getElementById('footerText').textContent = t.footer;
            document.getElementById('controlsTitle').textContent = t.controlsTitle;
            document.getElementById('labelSenderInput').textContent = t.labelSender;
            document.getElementById('labelRecipientInput').textContent = t.labelRecipient;
            document.getElementById('senderInput').placeholder = t.placeholderSender;
            document.getElementById('recipientInput').placeholder = t.placeholderRecipient;
            document.getElementById('btnDuaText').textContent = t.btnDua;
            document.getElementById('btnShareText').textContent = t.btnShare;

            document.getElementById('titleNafahat').textContent = t.titleNafahat;
            document.getElementById('titleAdvice').textContent = t.titleAdvice;
            document.getElementById('titleTasbih').textContent = t.titleTasbih;
            document.getElementById('tapText').textContent = t.tapText;

            updateCardLive();
            randomizeAll();
        }

        function updateCardLive() {
            const t = content[currentLang];
            const senderVal = document.getElementById('senderInput').value;
            const recipientVal = document.getElementById('recipientInput').value;
            
            document.getElementById('displaySender').textContent = senderVal.trim() === "" ? t.defaultSender : senderVal;
            document.getElementById('displayRecipient').textContent = recipientVal.trim() === "" ? t.defaultRecipient : recipientVal;
        }

        function randomizeAll() {
            const t = content[currentLang];
            const randomDua = t.duas[Math.floor(Math.random() * t.duas.length)];
            const randomNafaha = t.nafahatList[Math.floor(Math.random() * t.nafahatList.length)];
            const randomAdvice = t.adviceList[Math.floor(Math.random() * t.adviceList.length)];

            setTextWithFade('randomDua', randomDua);
            setTextWithFade('textNafahat', randomNafaha);
            setTextWithFade('textAdvice', randomAdvice);
        }

        function setTextWithFade(id, text) {
            const el = document.getElementById(id);
            el.style.opacity = 0;
            setTimeout(() => {
                el.textContent = text;
                el.style.opacity = 1;
            }, 300);
        }

        function incrementTasbih() {
            tasbihCount++;
            const el = document.getElementById('tasbihCount');
            el.textContent = tasbihCount;
            el.style.transform = "scale(1.2)";
            setTimeout(() => el.style.transform = "scale(1)", 150);
        }

        async function shareGreeting() {
            const senderVal = document.getElementById('senderInput').value.trim();
            const recipientVal = document.getElementById('recipientInput').value.trim();
            const t = content[currentLang];

            const baseUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
            const shareUrl = `${baseUrl}?sender=${encodeURIComponent(senderVal)}&recipient=${encodeURIComponent(recipientVal)}&lang=${currentLang}`;
            
            const shareTitle = t.title;
            const displayName = senderVal || t.defaultSender;
            const displayTarget = recipientVal || t.defaultRecipient;
            const shareText = `${t.shareMsg}\n${t.from} ${displayName}\n${t.to} ${displayTarget}\n\nğŸ‘‡`;

            if (navigator.share) {
                try {
                    await navigator.share({
                        title: shareTitle,
                        text: shareText,
                        url: shareUrl
                    });
                } catch (err) { console.log('Error sharing:', err); }
            } else {
                copyToClipboard(shareUrl);
            }
        }

        function copyToClipboard(text) {
            const toast = document.getElementById('toast');
            const t = content[currentLang];
            navigator.clipboard.writeText(text).then(() => {
                toast.textContent = t.toast;
                toast.className = "show";
                setTimeout(function(){ toast.className = toast.className.replace("show", ""); }, 3000);
            }, () => { prompt("Copy link:", text); });
        }
    </script>
</body>
</html>
