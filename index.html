<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ramadan Greeting Card</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Reem+Kufi:wght@400;700&family=Poppins:wght@400;600&family=Noto+Sans+SC:wght@400;700&family=Noto+Sans+JP:wght@400;700&family=Aref+Ruqaa:wght@400;700&family=Cairo:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© --- */
        :root {
            --bg-body: #0f172a;
            --bg-card: rgba(255, 255, 255, 0.05);
            --primary: #c5a059;
            --secondary: #ffd700;
            --accent: #10b981;
            --text-main: #f8fafc;
            --text-sub: #cbd5e1;
            --border-color: #c5a059;
            --border-width: 2px;
            --border-style: solid;
            --radius: 20px;
            --shadow: 0 10px 30px rgba(0,0,0,0.5);
            --font-head: 'Reem Kufi', sans-serif;
            --font-body: 'Amiri', serif;
            --overlay-pattern: url('data:image/svg+xml,%3Csvg width=\'60\' height=\'60\' viewBox=\'0 0 60 60\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cg fill=\'none\' fill-rule=\'evenodd\'%3E%3Cg fill=\'%23c5a059\' fill-opacity=\'0.05\'%3E%3Cpath d=\'M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');
        }

        /* ================= THEMES ================= */
        [data-theme="default"] { --bg-body: radial-gradient(circle at 50% 10%, #1e293b 0%, #0f172a 100%); }
        [data-theme="emerald"] { --bg-body: radial-gradient(circle, #064e3b 0%, #022c22 100%); --bg-card: rgba(6, 78, 59, 0.8); --primary: #fbbf24; --secondary: #f59e0b; --accent: #34d399; --border-color: #fbbf24; --radius: 8px; --font-head: 'Aref Ruqaa', serif; --overlay-pattern: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1h2v2H1V1zm4 4h2v2H5V5zm4 4h2v2H9V9zm4 4h2v2h-2v-2zm4 4h2v2h-2v-2z' fill='%23fbbf24' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E"); }
        [data-theme="scroll"] { --bg-body: #fdf6e3; --bg-card: #fffbf0; --primary: #8d6e63; --secondary: #5d4037; --accent: #d35400; --text-main: #3e2723; --text-sub: #5d4037; --border-color: #8d6e63; --border-style: double; --border-width: 6px; --radius: 2px; --shadow: 10px 10px 0px rgba(93, 64, 55, 0.2); --font-head: 'Amiri', serif; --overlay-pattern: none; }
        [data-theme="ruby"] { --bg-body: linear-gradient(135deg, #7f1d1d 0%, #450a0a 100%); --bg-card: rgba(127, 29, 29, 0.5); --primary: #e5e7eb; --secondary: #ffffff; --accent: #fca5a5; --border-color: rgba(255,255,255,0.3); --radius: 30px; --font-head: 'Cairo', sans-serif; }
        [data-theme="mirage"] { --bg-body: #e0e5ec; --bg-card: #e0e5ec; --primary: #475569; --secondary: #1e293b; --accent: #3b82f6; --text-main: #1e293b; --text-sub: #475569; --border-width: 0px; --radius: 25px; --shadow: 9px 9px 16px rgb(163,177,198,0.6), -9px -9px 16px rgba(255,255,255, 0.5); --font-head: 'Poppins', sans-serif; --overlay-pattern: none; }
        [data-theme="space"] { --bg-body: #000000; --bg-card: rgba(20, 20, 20, 0.8); --primary: #d946ef; --secondary: #8b5cf6; --accent: #06b6d4; --border-color: #d946ef; --border-width: 1px; --shadow: 0 0 20px rgba(217, 70, 239, 0.4); --radius: 0px; --font-head: 'Cairo', sans-serif; --overlay-pattern: none; }
        [data-theme="ceramic"] { --bg-body: #f0f9ff; --bg-card: #ffffff; --primary: #0369a1; --secondary: #0ea5e9; --accent: #0284c7; --text-main: #0c4a6e; --text-sub: #075985; --border-color: #0369a1; --border-width: 3px; --radius: 40px 40px 0 0; --font-head: 'Reem Kufi', sans-serif; --shadow: 0 10px 25px rgba(3, 105, 161, 0.2); }
        [data-theme="sunset"] { --bg-body: linear-gradient(45deg, #7c3aed, #db2777, #f59e0b); --bg-card: rgba(255, 255, 255, 0.2); --primary: #fff; --secondary: #fff; --accent: #fde047; --border-color: rgba(255,255,255,0.4); --radius: 20px; --shadow: 0 8px 32px rgba(0, 0, 0, 0.3); --font-head: 'Cairo', sans-serif; }
        [data-theme="pearl"] { --bg-body: #f8fafc; --bg-card: #ffffff; --primary: #94a3b8; --secondary: #64748b; --accent: #334155; --text-main: #1e293b; --text-sub: #475569; --border-width: 1px; --border-color: #e2e8f0; --radius: 12px; --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); --font-head: 'Amiri', serif; --overlay-pattern: none; }
        [data-theme="kaaba"] { --bg-body: #111; --bg-card: #000; --primary: #FFD700; --secondary: #B8860B; --accent: #FFF; --border-color: #FFD700; --border-width: 4px; --border-style: solid; --radius: 0; --text-main: #FFD700; --text-sub: #FFF; --shadow: 0 0 50px rgba(255, 215, 0, 0.1); --overlay-pattern: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h40v40H0V0zm20 20h20v20H20V20zM0 20h20v20H0V20zM20 0h20v20H20V0z' fill='%23FFD700' fill-opacity='0.05'/%3E%3C/svg%3E"); }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: var(--font-body); background: var(--bg-body); color: var(--text-main);
            overflow-x: hidden; min-height: 100vh; padding-bottom: 40px; transition: all 0.5s ease;
        }

        .bg-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0; opacity: 1; background-image: var(--overlay-pattern);
            transition: all 0.5s ease;
        }

        .falling-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; overflow: hidden; }
        .fall-item { position: absolute; top: -50px; color: var(--secondary); opacity: 0.7; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        .top-controls {
            position: absolute; top: 50px; width: 100%; display: flex; justify-content: space-between; padding: 0 20px; z-index: 100;
        }
        select {
            background: rgba(0,0,0,0.5); color: #fff; border: 1px solid var(--primary);
            padding: 8px 10px; border-radius: 20px; font-family: 'Cairo', sans-serif; cursor: pointer; outline: none; font-size: 0.85rem; backdrop-filter: blur(5px);
            max-width: 40%;
        }
        [data-theme="scroll"] select, [data-theme="mirage"] select, [data-theme="ceramic"] select, [data-theme="pearl"] select { background: rgba(255,255,255,0.8); color: #000; }

        .audio-btn {
            position: fixed; bottom: 20px; right: 20px; width: 50px; height: 50px;
            background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3); cursor: pointer; z-index: 1000; border: 2px solid var(--bg-card);
            transition: transform 0.3s; color: var(--bg-body); font-size: 1.2rem;
        }
        .audio-btn:active { transform: scale(0.9); }
        .audio-pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 var(--primary); } 70% { box-shadow: 0 0 0 15px rgba(0,0,0,0); } 100% { box-shadow: 0 0 0 0 rgba(0,0,0,0); } }

        .news-ticker {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            color: #000; padding: 8px 0; font-weight: bold; font-family: var(--font-head);
            position: fixed; top: 0; width: 100%; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.3); font-size: 0.9rem;
        }
        .ticker-content { white-space: nowrap; display: inline-block; padding-left: 100%; }
        .ticker-rtl { animation: ticker-rtl-move 25s linear infinite; direction: ltr; float: left;}
        .ticker-ltr { animation: ticker-ltr-move 25s linear infinite; }
        @keyframes ticker-rtl-move { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
        @keyframes ticker-ltr-move { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        .lanterns-container {
            position: absolute; top: 40px; width: 100%; display: flex; justify-content: space-between; padding: 0 10px; z-index: 5; pointer-events: none;
        }
        .lantern { width: 60px; height: auto; transform-origin: top center; transition: all 0.5s; }
        .lantern path { stroke: var(--primary); stroke-width: 2; fill: rgba(255,255,255,0.1); }
        .lantern circle { fill: var(--secondary); filter: blur(5px); }
        .l-left { animation: swing 3s infinite alternate; margin-left: 5%; }
        .l-right { animation: swing 4s infinite alternate; margin-right: 5%; width: 80px; }
        .l-center { animation: swing 5s infinite alternate; width: 50px; position: absolute; left: 50%; transform: translateX(-50%); top: -10px;}
        @keyframes swing { 0% { transform: rotate(5deg); } 100% { transform: rotate(-5deg); } }

        .main-container {
            position: relative; z-index: 10; max-width: 800px;
            margin: 110px auto 40px; text-align: center; padding: 20px;
        }

        .moon-icon {
            font-size: 5rem; color: var(--secondary); text-shadow: 0 0 30px rgba(255, 215, 0, 0.4);
            animation: float 6s infinite; margin-bottom: 20px; display: inline-block;
        }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }

        h1 {
            font-family: var(--font-head); font-size: 3rem; color: var(--primary);
            margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); transition: color 0.5s;
        }

        /* ØªÙ… Ø¥Ø²Ø§Ù„Ø© #captureArea Ù…Ù† Ù‡Ù†Ø§ Ù„Ø£Ù†Ù‡ Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ */

        .greeting-card {
            background: var(--bg-card); backdrop-filter: blur(10px);
            border: var(--border-width) var(--border-style) var(--border-color);
            border-radius: var(--radius); padding: 30px; margin: 20px 0;
            box-shadow: var(--shadow); transition: all 0.5s ease;
        }
        .greeting-label { font-size: 1rem; color: var(--text-sub); margin-bottom: 5px; opacity: 0.8; }
        .recipient-name {
            font-size: 2.5rem; color: var(--accent); font-family: var(--font-head);
            margin-bottom: 15px; display: block; text-shadow: 0 0 10px rgba(0,0,0,0.1); word-break: break-word;
        }
        .dua-text { font-size: 1.2rem; line-height: 1.8; margin: 20px 0; color: var(--text-main); font-style: italic; }
        .sender-section { margin-top: 25px; border-top: 1px solid var(--border-color); padding-top: 15px; opacity: 0.8; }
        .sender-name { color: var(--primary); font-family: var(--font-head); font-size: 1.4rem; font-weight: bold; }

        /* --- Ù‚Ø³Ù… Ø§Ù„Ù‚Ù„Ø¨ ÙˆØ§Ù„Ø¹Ø¯Ø§Ø¯ --- */
        .countdown-heart-container {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            margin-top: 20px; padding-top: 20px; border-top: 1px dashed var(--border-color);
        }
        
        .heart-svg {
            width: 150px; height: 100px;
            margin: 10px 0;
        }
        
        /* Ø§Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø±Ø³Ù… Ù„Ù„Ù‚Ù„Ø¨ */
        .heart-path {
            fill: none;
            stroke: var(--accent);
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            stroke-dasharray: 400; 
            stroke-dashoffset: 400;
            animation: drawHeart 4s ease-in-out infinite;
        }
        
        @keyframes drawHeart {
            0% { stroke-dashoffset: 400; opacity: 0; }
            10% { opacity: 1; }
            80% { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: 0; }
        }

        .ramadan-wait-text {
            font-family: var(--font-head);
            font-size: 1.1rem; color: var(--primary); margin-bottom: 5px;
        }
        
        .countdown-digits {
            font-family: 'Poppins', sans-serif; font-weight: bold;
            color: var(--secondary); font-size: 1.3rem;
            direction: ltr;
        }

        /* --- Ø§Ù„Ø´Ø¨ÙƒØ© --- */
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .feature-card {
            background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--radius);
            padding: 15px; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: transform 0.3s; box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .feature-card:hover { transform: translateY(-3px); }
        .feature-icon { font-size: 1.8rem; margin-bottom: 10px; }
        .feature-title { color: var(--primary); font-size: 1rem; font-weight: bold; margin-bottom: 8px; font-family: var(--font-head);}
        .feature-text { font-size: 0.9rem; line-height: 1.4; opacity: 0.9; min-height: 40px; color: var(--text-main); display: flex; align-items: center; justify-content: center;}

        .tasbih-card { cursor: pointer; }
        .tasbih-card:active { transform: scale(0.95); }
        .counter-circle {
            width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--accent);
            display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; color: var(--text-main);
            margin-top: 5px; background: rgba(0,0,0,0.1);
        }

        /* --- Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ… --- */
        .controls {
            margin-top: 20px; background: var(--bg-card); padding: 25px;
            border-radius: var(--radius); border: 1px solid var(--border-color); transition: all 0.5s;
        }
        .input-group { margin-bottom: 15px; }
        html[dir="rtl"] .input-group { text-align: right; }
        html[dir="ltr"] .input-group { text-align: left; }
        .input-label { color: var(--primary); font-size: 0.9rem; margin-bottom: 5px; display: block; }
        input[type="text"] {
            width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--primary);
            background: rgba(255,255,255,0.1); color: var(--text-main);
            font-family: inherit; font-size: 1.1rem; text-align: center;
        }
        [data-theme="scroll"] input, [data-theme="mirage"] input, [data-theme="ceramic"] input, [data-theme="pearl"] input { background: rgba(0,0,0,0.05); color: #000; }

        .btn-group { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-top: 20px; }
        button {
            padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer;
            font-family: inherit; font-weight: bold; font-size: 0.95rem;
            display: flex; align-items: center; justify-content: center; gap: 5px; flex: 1; min-width: 130px;
            transition: all 0.3s;
        }
        .btn-generate { background: var(--primary); color: var(--bg-body); }
        .btn-share { background: var(--accent); color: #fff; }
        .btn-download { background: var(--secondary); color: #000; }
        button:hover { filter: brightness(1.1); transform: translateY(-2px); }

        #toast {
            visibility: hidden; min-width: 250px; background-color: #333; color: #fff;
            text-align: center; border-radius: 8px; padding: 16px; position: fixed;
            z-index: 2000; left: 50%; bottom: 30px; transform: translateX(-50%);
            border-bottom: 4px solid var(--accent);
        }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }
        
        @media (max-width: 600px) {
            h1 { font-size: 2.2rem; }
            .lantern { width: 45px; } .l-right { width: 65px; }
            button { width: 100%; margin-bottom: 5px; }
            .features-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body data-theme="default">

    <audio id="ramadanAudio" loop>
        <source src="https://github.com/herafta/ramadan-card-2026/blob/main/Ramadan.mp3" type="audio/mpeg">
    </audio>
    <div class="audio-btn" onclick="toggleAudio()" id="audioBtn">ğŸ”ˆ</div>

    <div class="bg-overlay"></div>
    <div class="falling-container" id="fallingContainer"></div>

    <div class="top-controls">
        <select id="languageSelector" onchange="changeLanguage(this.value)">
            <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
            <option value="en">ğŸ‡¬ğŸ‡§ English</option>
            <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
            <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
            <option value="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
            <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
            <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
            <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
        </select>

        <select id="themeSelector" onchange="changeTheme(this.value)">
            <option value="default">ğŸŒŒ Ø§Ù„Ù„ÙŠØ§Ù„ÙŠ</option>
            <option value="emerald">ğŸŒ¿ Ø§Ù„Ø²Ù…Ø±Ø¯</option>
            <option value="scroll">ğŸ“œ Ø§Ù„Ù…Ø®Ø·ÙˆØ·Ø©</option>
            <option value="ruby">ğŸ‘‘ Ø§Ù„ÙŠØ§Ù‚ÙˆØª</option>
            <option value="mirage">ğŸŒ«ï¸ Ø§Ù„Ø³Ø±Ø§Ø¨</option>
            <option value="space">ğŸª Ø§Ù„ÙØ¶Ø§Ø¡</option>
            <option value="ceramic">ğŸº Ø§Ù„Ø®Ø²Ù</option>
            <option value="sunset">ğŸŒ… Ø§Ù„ØºØ±ÙˆØ¨</option>
            <option value="pearl">ğŸš Ø§Ù„Ù„Ø¤Ù„Ø¤</option>
            <option value="kaaba">ğŸ•‹ Ø§Ù„ÙƒØ¹Ø¨Ø©</option>
        </select>
    </div>

    <div class="news-ticker">
        <div class="ticker-content" id="tickerText"></div>
    </div>

    <div class="lanterns-container">
        <div class="lantern l-left"><svg viewBox="0 0 100 200"><path d="M50,0 L50,20 M20,20 L80,20 L90,60 L10,60 L20,20 M10,60 L90,60 L80,150 L20,150 L10,60 M40,150 L40,180 M60,150 L60,180 M30,180 L70,180"/><circle cx="50" cy="100" r="15"/></svg></div>
        <div class="lantern l-center"><svg viewBox="0 0 100 200"><path d="M50,0 L50,30 M30,30 L70,30 L80,70 L20,70 L30,30 M20,70 L80,70 L70,140 L30,140 L20,70 M45,140 L45,170 M55,140 L55,170 M35,170 L65,170"/><circle cx="50" cy="100" r="10"/></svg></div>
        <div class="lantern l-right"><svg viewBox="0 0 100 200"><path d="M50,0 L50,20 M20,20 L80,20 L90,60 L10,60 L20,20 M10,60 L90,60 L80,150 L20,150 L10,60 M40,150 L40,180 M60,150 L60,180 M30,180 L70,180"/><circle cx="50" cy="100" r="15"/></svg></div>
    </div>

    <div class="main-container">
        <div id="toBeCaptured">
            <div class="moon-icon" style="text-align: center; width: 100%;">ğŸŒ™</div>
            <h1 id="mainTitle" style="text-align: center;">Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ</h1>
            <p id="subTitle" style="font-size: 1.2rem; opacity: 0.8; text-align: center;">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø´Ù‡Ø± Ø§Ù„Ø®ÙŠØ± ÙˆØ§Ù„Ø±Ø­Ù…Ø©</p>

            <div class="greeting-card" id="cardArea">
                <p class="greeting-label" id="toLabel">Ø¥Ù„Ù‰ Ø§Ù„ØºØ§Ù„ÙŠ/Ø©:</p>
                <span class="recipient-name" id="displayRecipient">Ø²Ø§Ø¦Ø±Ù†Ø§ Ø§Ù„ÙƒØ±ÙŠÙ…</span>
                <hr style="border-color: var(--primary); margin: 10px 0; opacity: 0.5;">
                <p class="dua-text" id="randomDua">...</p>
                <div class="sender-section">
                    <p class="greeting-label" id="fromLabel">Ù…Ù†:</p>
                    <span class="sender-name" id="displaySender">ÙØ§Ø¹Ù„ Ø®ÙŠØ±</span>
                </div>
                
                <div class="countdown-heart-container">
                    <span class="ramadan-wait-text" id="ramadanWaitText">Ø±Ù…Ø¶Ø§Ù† ÙŠÙ‚ØªØ±Ø¨ .. ÙˆØ§Ù„Ù‚Ù„Ø¨ ÙŠØ±ØªÙ‚Ø¨</span>
                    <svg class="heart-svg" viewBox="0 0 120 100">
                        <path class="heart-path" d="M 60,30 A 15,15 0 0,1 90,30 C 90,50 70,70 60,85 C 50,70 30,50 30,30 A 15,15 0 0,1 60,30 M 90,30 L 95,30 L 100,20 L 105,40 L 110,30 L 115,30" fill="none" />
                    </svg>
                    <span id="ramadanCountdown" class="countdown-digits">...</span>
                </div>

                <p id="footerText" style="font-size: 0.9rem; color: var(--primary); margin-top: 15px;">ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ… Ø¨Ø®ÙŠØ±</p>
            </div>
        </div>

        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">âœ¨</div>
                <div class="feature-title" id="titleNafahat">Ù†ÙØ­Ø§Øª</div>
                <div class="feature-text" id="textNafahat">...</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ’¡</div>
                <div class="feature-title" id="titleAdvice">Ù†ØµÙŠØ­Ø© Ø±Ù…Ø¶Ø§Ù†ÙŠØ©</div>
                <div class="feature-text" id="textAdvice">...</div>
            </div>
            <div class="feature-card tasbih-card" onclick="incrementTasbih()">
                <div class="feature-title" id="titleTasbih" style="margin-bottom:0">Ù…Ø³Ø¨Ø­Ø©</div>
                <div class="counter-circle" id="tasbihCount">0</div>
                <small style="opacity:0.7; margin-top:5px; font-size:0.8rem" id="tapText">Ø§Ø¶ØºØ· Ù„Ù„ØªØ³Ø¨ÙŠØ­</small>
            </div>
        </div>

        <div class="controls">
            <h3 id="controlsTitle" style="margin-bottom: 20px; color: var(--primary);">ğŸ‘‡ Ø£Ù†Ø´Ø¦ Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©</h3>
            <div class="input-group">
                <label class="input-label" id="labelSenderInput">Ø§Ø³Ù…Ùƒ (Ø§Ù„Ù…Ø±Ø³Ù„):</label>
                <input type="text" id="senderInput" oninput="updateCardLive()" autocomplete="off">
            </div>
            <div class="input-group">
                <label class="input-label" id="labelRecipientInput">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„:</label>
                <input type="text" id="recipientInput" oninput="updateCardLive()" autocomplete="off">
            </div>
            <div class="btn-group">
                <button class="btn-generate" onclick="randomizeAll()">
                    <span>âœ¨</span> <span id="btnDuaText">ØªØ­Ø¯ÙŠØ«</span>
                </button>
                <button class="btn-download" onclick="downloadImage()">
                    <span>ğŸ“¸</span> <span id="btnDownloadText">ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø©</span>
                </button>
                <button class="btn-share" onclick="shareGreeting()">
                    <span>ğŸ”—</span> <span id="btnShareText">Ù…Ø´Ø§Ø±ÙƒØ©</span>
                </button>
            </div>
        </div>
    </div>

    <div id="toast">ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!</div>

    <script>
        const content = {
            ar: {
                dir: "rtl",
                title: "Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ", subTitle: "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø´Ù‡Ø± Ø§Ù„Ø®ÙŠØ± ÙˆØ§Ù„Ø±Ø­Ù…Ø©", ticker: "ğŸŒ™ ØªÙ‡Ù†Ø¦Ø© Ø®Ø§ØµØ© Ø¨Ù…Ù†Ø§Ø³Ø¨Ø© Ø­Ù„ÙˆÙ„ Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ Ù…Ù† Ø§Ù„Ù…ØµÙ…Ù… ÙŠÙˆÙ†Ø³ Ø§Ù„Ø´ÙŠØ® | ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†Ø§ ÙˆÙ…Ù†ÙƒÙ… ØµØ§Ù„Ø­ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ğŸŒ™",
                to: "Ø¥Ù„Ù‰ Ø§Ù„ØºØ§Ù„ÙŠ/Ø©:", from: "Ù…Ù†:", defaultSender: "ÙØ§Ø¹Ù„ Ø®ÙŠØ±", defaultRecipient: "Ø²Ø§Ø¦Ø±Ù†Ø§ Ø§Ù„ÙƒØ±ÙŠÙ…", footer: "ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ… Ø¨Ø®ÙŠØ±",
                controlsTitle: "ğŸ‘‡ Ø£Ù†Ø´Ø¦ Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©", labelSender: "Ø§Ø³Ù…Ùƒ (Ø§Ù„Ù…Ø±Ø³Ù„):", labelRecipient: "Ø§Ø³Ù… Ù…Ù† ØªØ­Ø¨:",
                placeholderSender: "Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯...", placeholderRecipient: "Ù…Ø«Ø§Ù„: Ø®Ø§Ù„Ø¯...",
                btnDua: "ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ø¨Ø§Ø±Ø§Øª", btnShare: "Ø´Ø§Ø±ÙƒÙ‡Ø§ ÙƒØ±Ø§Ø¨Ø·", btnDownload: "Ø´Ø§Ø±ÙƒÙ‡Ø§ ÙƒØµÙˆØ±Ø©", toast: "ØªÙ… Ø§Ù„Ù†Ø³Ø®!",
                shareMsg: "ğŸŒ™ ØªÙ‡Ù†Ø¦Ø© Ø®Ø§ØµØ© Ø¨Ù…Ù†Ø§Ø³Ø¨Ø© Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ", titleNafahat: "Ù†ÙØ­Ø§Øª", titleAdvice: "Ù†ØµÙŠØ­Ø©", titleTasbih: "Ù…Ø³Ø¨Ø­Ø©", tapText: "Ø§Ø¶ØºØ· Ù„Ù„ØªØ³Ø¨ÙŠØ­",
                ramadanWait: "Ø±Ù…Ø¶Ø§Ù† ÙŠÙ‚ØªØ±Ø¨ .. ÙˆØ§Ù„Ù‚Ù„Ø¨ ÙŠØ±ØªÙ‚Ø¨", days: "ÙŠÙˆÙ…", hours: "Ø³Ø§Ø¹Ø©",
                themeNames: { default: "ğŸŒŒ Ø§Ù„Ù„ÙŠØ§Ù„ÙŠ", emerald: "ğŸŒ¿ Ø§Ù„Ø²Ù…Ø±Ø¯", scroll: "ğŸ“œ Ø§Ù„Ù…Ø®Ø·ÙˆØ·Ø©", ruby: "ğŸ‘‘ Ø§Ù„ÙŠØ§Ù‚ÙˆØª", mirage: "ğŸŒ«ï¸ Ø§Ù„Ø³Ø±Ø§Ø¨", space: "ğŸª Ø§Ù„ÙØ¶Ø§Ø¡", ceramic: "ğŸº Ø§Ù„Ø®Ø²Ù", sunset: "ğŸŒ… Ø§Ù„ØºØ±ÙˆØ¨", pearl: "ğŸš Ø§Ù„Ù„Ø¤Ù„Ø¤", kaaba: "ğŸ•‹ Ø§Ù„ÙƒØ¹Ø¨Ø©" },
                duas: ["Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø¹ØªÙ‚Ø§Ø¦Ùƒ Ù…Ù† Ø§Ù„Ù†Ø§Ø±.", "Ù…Ø¨Ø§Ø±Ùƒ Ø¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø´Ù‡Ø±ØŒ Ø£Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ø§Ù„Ù‚Ø¨ÙˆÙ„.", "Ø§Ù„Ù„Ù‡Ù… Ø³Ù„Ù…Ù†Ø§ Ù„Ø±Ù…Ø¶Ø§Ù†ØŒ ÙˆØ³Ù„Ù… Ø±Ù…Ø¶Ø§Ù† Ù„Ù†Ø§."],
                nafahatList: ["Ø§Ù„ØµÙˆÙ… ØªØ±Ø¨ÙŠØ© Ù„Ù„Ø¥Ø±Ø§Ø¯Ø©.", "Ø±Ù…Ø¶Ø§Ù† ÙØ±ØµØ© Ù„Ù„ØªØºÙŠÙŠØ±.", "Ø§Ù„Ù‚Ø±Ø¢Ù† Ø±ÙˆØ­ Ø±Ù…Ø¶Ø§Ù†."],
                adviceList: ["Ù„Ø§ ØªÙƒØ«Ø± Ù…Ù† Ø§Ù„Ø·Ø¹Ø§Ù… Ø¹Ù†Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.", "Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ ØµÙ„Ø§Ø© Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­.", "Ø®ØµØµ ÙˆÙ‚ØªØ§Ù‹ Ù„Ù„Ø¯Ø¹Ø§Ø¡."]
            },
            en: { 
                dir: "ltr", title: "Ramadan Mubarak", subTitle: "Welcome to the month of mercy", ticker: "ğŸŒ™ Special Greeting for Ramadan by Younes Al-Sheikh Abu Taym ğŸŒ™", 
                to: "To:", from: "From:", defaultSender: "A Well Wisher", defaultRecipient: "Dear Guest", footer: "Happy Ramadan", 
                controlsTitle: "ğŸ‘‡ Create your card", labelSender: "Your Name:", labelRecipient: "Recipient Name:", 
                placeholderSender: "e.g. Ahmed...", placeholderRecipient: "e.g. John...", 
                btnDua: "Refresh", btnShare: "Share", btnDownload: "Save Image", toast: "Copied!", 
                shareMsg: "ğŸŒ™ Ramadan Greeting", titleNafahat: "Inspiration", titleAdvice: "Tip", titleTasbih: "Tasbih", tapText: "Tap to count",
                ramadanWait: "Ramadan approaches.. the heart awaits", days: "d", hours: "h",
                themeNames: { default: "ğŸŒŒ Nights", emerald: "ğŸŒ¿ Emerald", scroll: "ğŸ“œ Scroll", ruby: "ğŸ‘‘ Ruby", mirage: "ğŸŒ«ï¸ Mirage", space: "ğŸª Space", ceramic: "ğŸº Ceramic", sunset: "ğŸŒ… Sunset", pearl: "ğŸš Pearl", kaaba: "ğŸ•‹ Kaaba" },
                duas: ["May Allah accept your fasting.", "Wishing you a blessed Ramadan.", "May this Ramadan bring joy."], 
                nafahatList: ["Fasting is discipline.", "Chance for change.", "Quran is the soul."], 
                adviceList: ["Don't overeat at Iftar.", "Maintain Taraweeh.", "Make Dua frequently."] 
            },
            fr: { dir: "ltr", title: "Ramadan Mubarak", subTitle: "Bienvenue au mois de la misÃ©ricorde", ticker: "ğŸŒ™ Voeux pour le Ramadan par Younes Al-Sheikh Abu Taym ğŸŒ™", to: "Pour:", from: "De:", defaultSender: "Ami", defaultRecipient: "InvitÃ©", footer: "Joyeux Ramadan", controlsTitle: "ğŸ‘‡ CrÃ©ez votre carte", labelSender: "Votre Nom:", labelRecipient: "Destinataire:", placeholderSender: "ex: Ahmed...", placeholderRecipient: "ex: Marie...", btnDua: "Actualiser", btnShare: "Partager", btnDownload: "Image", toast: "CopiÃ© !", shareMsg: "ğŸŒ™ Voeux Ramadan", titleNafahat: "Inspiration", titleAdvice: "Conseil", titleTasbih: "Tasbih", tapText: "Appuyez pour compter", ramadanWait: "Ramadan approche.. le cÅ“ur attend", days: "j", hours: "h", themeNames: { default: "ğŸŒŒ Nuits", emerald: "ğŸŒ¿ Ã‰meraude", scroll: "ğŸ“œ Parchemin", ruby: "ğŸ‘‘ Rubis", mirage: "ğŸŒ«ï¸ Mirage", space: "ğŸª Espace", ceramic: "ğŸº CÃ©ramique", sunset: "ğŸŒ… Coucher", pearl: "ğŸš Perle", kaaba: "ğŸ•‹ Kaaba" }, duas: ["Qu'Allah accepte votre jeÃ»ne.", "Joyeux Ramadan.", "Que ce Ramadan apporte la joie."], nafahatList: ["Le jeÃ»ne est discipline.", "Chance de changement.", "Coran est l'Ã¢me."], adviceList: ["Mangez peu.", "Priez Tarawih.", "Faites Dua."] },
            es: { dir: "ltr", title: "RamadÃ¡n Mubarak", subTitle: "Bienvenido el mes de la misericordia", ticker: "ğŸŒ™ Saludos de RamadÃ¡n por Younes Al-Sheikh Abu Taym ğŸŒ™", to: "Para:", from: "De:", defaultSender: "Amigo", defaultRecipient: "Invitado", footer: "Feliz RamadÃ¡n", controlsTitle: "ğŸ‘‡ Crea tu tarjeta", labelSender: "Tu Nombre:", labelRecipient: "Destinatario:", placeholderSender: "ej: Ahmed...", placeholderRecipient: "ej: Juan...", btnDua: "Actualizar", btnShare: "Compartir", btnDownload: "Imagen", toast: "Â¡Copiado!", shareMsg: "ğŸŒ™ Saludos de RamadÃ¡n", titleNafahat: "InspiraciÃ³n", titleAdvice: "Consejo", titleTasbih: "Tasbih", tapText: "Toca para contar", ramadanWait: "RamadÃ¡n se acerca.. el corazÃ³n espera", days: "d", hours: "h", themeNames: { default: "ğŸŒŒ Noches", emerald: "ğŸŒ¿ Esmeralda", scroll: "ğŸ“œ Pergamino", ruby: "ğŸ‘‘ RubÃ­", mirage: "ğŸŒ«ï¸ Espejismo", space: "ğŸª Espacio", ceramic: "ğŸº CerÃ¡mica", sunset: "ğŸŒ… Ocaso", pearl: "ğŸš Perla", kaaba: "ğŸ•‹ Kaaba" }, duas: ["Que Allah acepte tu ayuno.", "Bendito RamadÃ¡n.", "AlegrÃ­a en RamadÃ¡n."], nafahatList: ["Ayuno es disciplina.", "Oportunidad de cambio.", "CorÃ¡n es el alma."], adviceList: ["No comas en exceso.", "Oraciones de Tarawih.", "Haz Dua."] },
            zh: { dir: "ltr", title: "æ–‹æœˆå‰åº†", subTitle: "æ¬¢è¿æ¥åˆ°æ…ˆæ‚¯ä¹‹æœˆ", ticker: "ğŸŒ™ Younes Al-Sheikh Abu Taym çš„æ–‹æœˆç¥ç¦ ğŸŒ™", to: "è‡´:", from: "æ¥è‡ª:", defaultSender: "æœ‹å‹", defaultRecipient: "è´µå®¢", footer: "æ–‹æœˆå¿«ä¹", controlsTitle: "ğŸ‘‡ åˆ¶ä½œè´ºå¡", labelSender: "ä½ çš„åå­—:", labelRecipient: "æ”¶ä»¶äºº:", placeholderSender: "ä¾‹å¦‚: é˜¿é‡Œ...", placeholderRecipient: "ä¾‹å¦‚: ç©†ç½•é»˜å¾·...", btnDua: "åˆ·æ–°", btnShare: "åˆ†äº«", btnDownload: "ä¿å­˜å›¾ç‰‡", toast: "å·²å¤åˆ¶ï¼", shareMsg: "ğŸŒ™ æ–‹æœˆç¥ç¦", titleNafahat: "çµæ„Ÿ", titleAdvice: "å»ºè®®", titleTasbih: "èµä»¥æ­¤", tapText: "ç‚¹å‡»è®¡æ•°", ramadanWait: "æ–‹æœˆä¸´è¿‘.. å¿ƒåœ¨ç­‰å¾…", days: "å¤©", hours: "å°æ—¶", themeNames: { default: "ğŸŒŒ å¤œæ™š", emerald: "ğŸŒ¿ ç¿¡ç¿ ", scroll: "ğŸ“œ å·è½´", ruby: "ğŸ‘‘ çº¢å®çŸ³", mirage: "ğŸŒ«ï¸ æµ·å¸‚èœƒæ¥¼", space: "ğŸª å¤ªç©º", ceramic: "ğŸº é™¶ç“·", sunset: "ğŸŒ… æ—¥è½", pearl: "ğŸš çç ", kaaba: "ğŸ•‹ å¤©æˆ¿" }, duas: ["æ„¿çœŸä¸»æ¥å—æ–‹æˆ’ã€‚", "æ–‹æœˆå‰åº†ã€‚", "æ„¿æ–‹æœˆå¸¦æ¥å–œæ‚¦ã€‚"], nafahatList: ["æ–‹æˆ’æ˜¯è‡ªå¾‹ã€‚", "æ”¹å˜çš„æœºä¼šã€‚", "å¤å…°ç»æ˜¯çµé­‚ã€‚"], adviceList: ["ä¸è¦æš´é¥®æš´é£Ÿã€‚", "åšæŒç¤¼æ‹œã€‚", "å¤šåšæœé˜¿ã€‚"] },
            ja: { dir: "ltr", title: "ãƒ©ãƒãƒ€ãƒ³ãƒ»ãƒ ãƒãƒ©ã‚¯", subTitle: "æ…ˆæ‚²ã®æœˆã¸ã‚ˆã†ã“ã", ticker: "ğŸŒ™ Younes Al-Sheikh Abu Taym ã‹ã‚‰ã®æŒ¨æ‹¶ ğŸŒ™", to: "ã¸:", from: "ã‹ã‚‰:", defaultSender: "å‹äºº", defaultRecipient: "ã‚²ã‚¹ãƒˆ", footer: "ãƒ©ãƒãƒ€ãƒ³ãŠã‚ã§ã¨ã†", controlsTitle: "ğŸ‘‡ ã‚«ãƒ¼ãƒ‰ä½œæˆ", labelSender: "åå‰:", labelRecipient: "å—å–äºº:", placeholderSender: "ä¾‹: ã‚¢ãƒª...", placeholderRecipient: "ä¾‹: ã‚¿ãƒŠã‚«...", btnDua: "æ›´æ–°", btnShare: "å…±æœ‰", btnDownload: "ç”»åƒã‚’ä¿å­˜", toast: "ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼", shareMsg: "ğŸŒ™ ãƒ©ãƒãƒ€ãƒ³ã®æŒ¨æ‹¶", titleNafahat: "ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³", titleAdvice: "ãƒ’ãƒ³ãƒˆ", titleTasbih: "ã‚¿ã‚¹ãƒ“ãƒ¼", tapText: "ã‚¿ãƒƒãƒ—ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆ", ramadanWait: "ãƒ©ãƒãƒ€ãƒ³ãŒè¿‘ã¥ã„ã¦ã„ã¾ã™..", days: "æ—¥", hours: "æ™‚é–“", themeNames: { default: "ğŸŒŒ å¤œ", emerald: "ğŸŒ¿ ã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰", scroll: "ğŸ“œ å·»ç‰©", ruby: "ğŸ‘‘ ãƒ«ãƒ“ãƒ¼", mirage: "ğŸŒ«ï¸ èœƒæ°—æ¥¼", space: "ğŸª å®‡å®™", ceramic: "ğŸº é™¶å™¨", sunset: "ğŸŒ… å¤•æ—¥", pearl: "ğŸš çœŸç ", kaaba: "ğŸ•‹ ã‚«ã‚¢ãƒ" }, duas: ["æ–­é£ŸãŒå—ã‘å…¥ã‚Œã‚‰ã‚Œã¾ã™ã‚ˆã†ã«ã€‚", "ç¥ç¦ã•ã‚ŒãŸãƒ©ãƒãƒ€ãƒ³ã‚’ã€‚", "å–œã³ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã‚ˆã†ã«ã€‚"], nafahatList: ["æ–­é£Ÿã¯è¦å¾‹ã§ã™ã€‚", "å¤‰åŒ–ã®æ©Ÿä¼šã§ã™ã€‚", "ã‚³ãƒ¼ãƒ©ãƒ³ã¯é­‚ã§ã™ã€‚"], adviceList: ["é£Ÿã¹éããªã„ã§ã€‚", "ç¥ˆã‚Šã‚’ç¶šã‘ã¦ã€‚", "ãƒ‰ã‚¥ã‚¢ã‚’ã—ã¦ã€‚"] },
            tr: { dir: "ltr", title: "HayÄ±rlÄ± Ramazanlar", subTitle: "Rahmet ayÄ± hoÅŸ geldin", ticker: "ğŸŒ™ Younes Al-Sheikh Abu Taym'dan Ramazan TebriÄŸi ğŸŒ™", to: "SayÄ±n:", from: "GÃ¶nderen:", defaultSender: "Dost", defaultRecipient: "Misafir", footer: "BayramÄ±nÄ±z MÃ¼barek Olsun", controlsTitle: "ğŸ‘‡ Kart oluÅŸtur", labelSender: "AdÄ±nÄ±z:", labelRecipient: "AlÄ±cÄ±:", placeholderSender: "Ã–rn: Ahmet...", placeholderRecipient: "Ã–rn: Mehmet...", btnDua: "Yenile", btnShare: "PaylaÅŸ", btnDownload: "Resmi Ä°ndir", toast: "KopyalandÄ±!", shareMsg: "ğŸŒ™ Ramazan TebriÄŸi", titleNafahat: "Ä°lham", titleAdvice: "Tavsiye", titleTasbih: "Tesbih", tapText: "Saymak iÃ§in dokun", ramadanWait: "Ramazan yaklaÅŸÄ±yor.. Kalp bekliyor", days: "g", hours: "s", themeNames: { default: "ğŸŒŒ Geceler", emerald: "ğŸŒ¿ ZÃ¼mrÃ¼t", scroll: "ğŸ“œ ParÅŸÃ¶men", ruby: "ğŸ‘‘ Yakut", mirage: "ğŸŒ«ï¸ Serap", space: "ğŸª Uzay", ceramic: "ğŸº Seramik", sunset: "ğŸŒ… GÃ¼n BatÄ±mÄ±", pearl: "ğŸš Ä°nci", kaaba: "ğŸ•‹ Kabe" }, duas: ["Allah kabul etsin.", "Bereketli Ramazanlar.", "HayÄ±rlÄ± Ramazanlar."], nafahatList: ["OruÃ§ sabÄ±rdÄ±r.", "Yenilenme fÄ±rsatÄ±.", "Kuran kalbidir."], adviceList: ["AÅŸÄ±rÄ± yemeyin.", "Teravih kÄ±lÄ±n.", "Dua edin."] },
            de: { dir: "ltr", title: "Ramadan Mubarak", subTitle: "Monat der Barmherzigkeit", ticker: "ğŸŒ™ Ramadan GrÃ¼ÃŸe von Younes Al-Sheikh Abu Taym ğŸŒ™", to: "FÃ¼r:", from: "Von:", defaultSender: "Freund", defaultRecipient: "Gast", footer: "Frohen Ramadan", controlsTitle: "ğŸ‘‡ Karte erstellen", labelSender: "Dein Name:", labelRecipient: "EmpfÃ¤nger:", placeholderSender: "z.B. Ahmed...", placeholderRecipient: "z.B. Lukas...", btnDua: "Neu", btnShare: "Teilen", btnDownload: "Bild speichern", toast: "Kopiert!", shareMsg: "ğŸŒ™ Ramadan GrÃ¼ÃŸe", titleNafahat: "Inspiration", titleAdvice: "Tipp", titleTasbih: "Tasbih", tapText: "Tippen zum ZÃ¤hlen", ramadanWait: "Ramadan naht.. das Herz wartet", days: "t", hours: "std", themeNames: { default: "ğŸŒŒ NÃ¤chte", emerald: "ğŸŒ¿ Smaragd", scroll: "ğŸ“œ Schriftrolle", ruby: "ğŸ‘‘ Rubin", mirage: "ğŸŒ«ï¸ Fata Morgana", space: "ğŸª Weltraum", ceramic: "ğŸº Keramik", sunset: "ğŸŒ… Sonnenuntergang", pearl: "ğŸš Perle", kaaba: "ğŸ•‹ Kaaba" }, duas: ["MÃ¶ge Allah annehmen.", "Gesegneten Ramadan.", "Frieden sei mit dir."], nafahatList: ["Fasten ist Geduld.", "Eine Chance.", "Der Koran ist die Seele."], adviceList: ["Iss nicht zu viel.", "Verrichte Gebete.", "Bitte Allah."] }
        };

        let currentLang = 'ar';
        let tasbihCount = 0;
        let audioPlaying = false;
        const audio = document.getElementById('ramadanAudio');

        document.addEventListener("DOMContentLoaded", function() {
            initPage();
            startFallingEffect();
            updateCountdown();
            setInterval(updateCountdown, 60000);
        });

        function initPage() {
            const urlParams = new URLSearchParams(window.location.search);
            const langParam = urlParams.get('lang');
            if (langParam && content[langParam]) {
                currentLang = langParam;
                document.getElementById('languageSelector').value = currentLang;
            }
            changeLanguage(currentLang);

            const themeParam = urlParams.get('theme');
            if (themeParam) {
                changeTheme(themeParam);
                document.getElementById('themeSelector').value = themeParam;
            }

            let sharedSender = urlParams.get('sender');
            let sharedRecipient = urlParams.get('recipient');
            const senderInput = document.getElementById('senderInput');
            const recipientInput = document.getElementById('recipientInput');
            if (sharedSender) try { senderInput.value = decodeURIComponent(sharedSender); } catch(e) {}
            if (sharedRecipient) try { recipientInput.value = decodeURIComponent(sharedRecipient); } catch(e) {}

            updateCardLive();
            randomizeAll();
        }

        function changeTheme(themeName) {
            document.body.setAttribute('data-theme', themeName);
        }

        function changeLanguage(lang) {
            currentLang = lang;
            const t = content[lang];
            
            document.documentElement.dir = t.dir;
            document.documentElement.lang = lang;

            document.getElementById('tickerText').textContent = t.ticker;
            document.getElementById('tickerText').className = `ticker-content ${t.dir === 'rtl' ? 'ticker-rtl' : 'ticker-ltr'}`;
            
            document.getElementById('mainTitle').textContent = t.title;
            document.getElementById('subTitle').textContent = t.subTitle;
            document.getElementById('toLabel').textContent = t.to;
            document.getElementById('fromLabel').textContent = t.from;
            document.getElementById('footerText').textContent = t.footer;
            document.getElementById('controlsTitle').textContent = t.controlsTitle;
            document.getElementById('labelSenderInput').textContent = t.labelSender;
            document.getElementById('labelRecipientInput').textContent = t.labelRecipient;
            document.getElementById('senderInput').placeholder = t.placeholderSender;
            document.getElementById('recipientInput').placeholder = t.placeholderRecipient;
            document.getElementById('btnDuaText').textContent = t.btnDua;
            document.getElementById('btnShareText').textContent = t.btnShare;
            document.getElementById('btnDownloadText').textContent = t.btnDownload;

            document.getElementById('titleNafahat').textContent = t.titleNafahat;
            document.getElementById('titleAdvice').textContent = t.titleAdvice;
            document.getElementById('titleTasbih').textContent = t.titleTasbih;
            document.getElementById('tapText').textContent = t.tapText;
            document.getElementById('ramadanWaitText').textContent = t.ramadanWait;

            const themeSelect = document.getElementById('themeSelector');
            Array.from(themeSelect.options).forEach(option => {
                if (t.themeNames[option.value]) option.text = t.themeNames[option.value];
            });

            updateCardLive();
            randomizeAll();
            updateCountdown();
        }

        function updateCardLive() {
            const t = content[currentLang];
            const senderVal = document.getElementById('senderInput').value;
            const recipientVal = document.getElementById('recipientInput').value;
            document.getElementById('displaySender').textContent = senderVal.trim() === "" ? t.defaultSender : senderVal;
            document.getElementById('displayRecipient').textContent = recipientVal.trim() === "" ? t.defaultRecipient : recipientVal;
        }

        function randomizeAll() {
            const t = content[currentLang];
            const randomDua = t.duas[Math.floor(Math.random() * t.duas.length)];
            const randomNafaha = t.nafahatList[Math.floor(Math.random() * t.nafahatList.length)];
            const randomAdvice = t.adviceList[Math.floor(Math.random() * t.adviceList.length)];

            setTextWithFade('randomDua', randomDua);
            setTextWithFade('textNafahat', randomNafaha);
            setTextWithFade('textAdvice', randomAdvice);
        }

        function setTextWithFade(id, text) {
            const el = document.getElementById(id);
            el.style.opacity = 0;
            setTimeout(() => { el.textContent = text; el.style.opacity = 1; }, 300);
        }

        function incrementTasbih() {
            tasbihCount++;
            const el = document.getElementById('tasbihCount');
            el.textContent = tasbihCount;
            el.style.transform = "scale(1.2)";
            setTimeout(() => el.style.transform = "scale(1)", 150);
        }

        function toggleAudio() {
            const btn = document.getElementById('audioBtn');
            if (audioPlaying) {
                audio.pause();
                btn.innerHTML = "ğŸ”ˆ";
                btn.classList.remove("audio-pulse");
            } else {
                audio.play();
                btn.innerHTML = "ğŸ”Š";
                btn.classList.add("audio-pulse");
            }
            audioPlaying = !audioPlaying;
        }

        function startFallingEffect() {
            const container = document.getElementById('fallingContainer');
            const symbols = ['â˜…', 'âœ¦', 'â€¢']; 
            setInterval(() => {
                const el = document.createElement('div');
                el.classList.add('fall-item');
                el.innerText = symbols[Math.floor(Math.random() * symbols.length)];
                el.style.left = Math.random() * 100 + 'vw';
                el.style.fontSize = (Math.random() * 10 + 10) + 'px';
                el.style.animationDuration = (Math.random() * 3 + 5) + 's';
                container.appendChild(el);
                setTimeout(() => el.remove(), 8000);
            }, 800);
        }

        function updateCountdown() {
            // ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆØ¹Ø¯ ØªÙ‚Ø±ÙŠØ¨ÙŠ Ù„Ø±Ù…Ø¶Ø§Ù† 2026
            const ramadanDate = new Date('2026-02-17T00:00:00'); 
            const now = new Date();
            const diff = ramadanDate - now;
            
            if (diff > 0) {
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const t = content[currentLang];
                document.getElementById('ramadanCountdown').textContent = `${days} ${t.days}, ${hours} ${t.hours}`;
            } else {
                document.getElementById('ramadanCountdown').textContent = "Ramadan Kareem!";
            }
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© (ØªÙ‚ÙˆÙ… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ù…Ø¤Ù‚ØªØ© ÙˆØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ù‚Ø¨Ù„ Ø§Ù„ØªØµÙˆÙŠØ±)
        function downloadImage() {
            const btn = document.querySelector('.btn-download');
            const originalText = btn.innerHTML;
            btn.innerHTML = "âŒ› ...";

            // 1. Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø§ÙˆÙŠØ© Ù…Ø¤Ù‚ØªØ©
            const tempContainer = document.createElement('div');
            tempContainer.setAttribute('id', 'temp-capture-container');
            tempContainer.style.position = 'absolute';
            tempContainer.style.left = '-9999px'; // Ø¥Ø®ÙØ§Ø¡ Ø®Ø§Ø±Ø¬ Ø§Ù„Ø´Ø§Ø´Ø©
            tempContainer.style.top = '0';
            // Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø£ØµÙ„ÙŠØ©
            tempContainer.style.width = document.querySelector('.main-container').offsetWidth + 'px';
            tempContainer.style.maxWidth = '800px';
            tempContainer.style.textAlign = 'center';
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø¤Ù‚ØªØ©
            const currentTheme = document.body.getAttribute('data-theme');
            tempContainer.setAttribute('data-theme', currentTheme);
            
            document.body.appendChild(tempContainer);


            // 2. Ø§Ø³ØªÙ†Ø³Ø§Ø® Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
            const originalToBeCaptured = document.getElementById('toBeCaptured');
            const originalFeaturesGrid = document.querySelector('.features-grid');

            const clonedToBeCaptured = originalToBeCaptured.cloneNode(true);
            const clonedFeaturesGrid = originalFeaturesGrid.cloneNode(true);

            // 3. ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³Ø¨Ø­Ø© ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø³Ø®Ø©
            const tasbihCard = clonedFeaturesGrid.querySelector('.tasbih-card');
            if (tasbihCard) {
                // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ø§Ù„ØµÙ„Ø§Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¨ÙŠ
                tasbihCard.innerHTML = '<span style="font-family: var(--font-head); font-size: 1.1rem; color: var(--primary); font-weight: bold; line-height: 1.6;">Ø§Ù„Ù„Ù‡Ù… ØµÙ„ Ø¹Ù„Ù‰ Ø³ÙŠØ¯Ù†Ø§ Ù…Ø­Ù…Ø¯</span>';
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ù„ÙŠØªÙ†Ø§Ø³Ø¨
                tasbihCard.removeAttribute('onclick');
                tasbihCard.style.cursor = 'default';
                tasbihCard.style.display = 'flex';
                tasbihCard.style.alignItems = 'center';
                tasbihCard.style.justifyContent = 'center';
                tasbihCard.style.minHeight = '130px'; // Ø¶Ù…Ø§Ù† Ø§Ø±ØªÙØ§Ø¹ Ù…Ù†Ø§Ø³Ø¨
            }

            // 4. ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø¤Ù‚ØªØ©
            tempContainer.appendChild(clonedToBeCaptured);
            // Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø§ÙØ© Ø¨Ø³ÙŠØ·Ø© Ø¨ÙŠÙ† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ÙˆØ§Ù„Ø´Ø¨ÙƒØ© ÙÙŠ Ø§Ù„ØµÙˆØ±Ø©
            const spacer = document.createElement('div');
            spacer.style.height = '20px';
            tempContainer.appendChild(spacer);
            tempContainer.appendChild(clonedFeaturesGrid);


            // 5. Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø© Ù„Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø¤Ù‚ØªØ©
            html2canvas(tempContainer, {
                backgroundColor: null,
                scale: 2, // Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©
                useCORS: true
            }).then(canvas => {
                // ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©
                const link = document.createElement('a');
                link.download = 'Ramadan-Greeting-Full.png';
                link.href = canvas.toDataURL('image/png');
                link.click();

                // ØªÙ†Ø¸ÙŠÙ
                document.body.removeChild(tempContainer);
                btn.innerHTML = originalText;
            }).catch(err => {
                console.error(err);
                alert("Error capturing image.");
                document.body.removeChild(tempContainer);
                btn.innerHTML = originalText;
            });
        }

        async function shareGreeting() {
            const senderVal = document.getElementById('senderInput').value.trim();
            const recipientVal = document.getElementById('recipientInput').value.trim();
            const currentTheme = document.body.getAttribute('data-theme') || 'default';
            const t = content[currentLang];

            const baseUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
            const shareUrl = `${baseUrl}?sender=${encodeURIComponent(senderVal)}&recipient=${encodeURIComponent(recipientVal)}&lang=${currentLang}&theme=${currentTheme}`;
            
            const shareText = `${t.shareMsg}\n${t.from} ${senderVal || t.defaultSender}\n${t.to} ${recipientVal || t.defaultRecipient}\n\nğŸ‘‡`;

            if (navigator.share) {
                try {
                    await navigator.share({ title: t.title, text: shareText, url: shareUrl });
                } catch (err) { console.log('Error sharing:', err); }
            } else {
                copyToClipboard(shareUrl);
            }
        }

        function copyToClipboard(text) {
            const toast = document.getElementById('toast');
            const t = content[currentLang];
            navigator.clipboard.writeText(text).then(() => {
                toast.textContent = t.toast;
                toast.className = "show";
                setTimeout(function(){ toast.className = toast.className.replace("show", ""); }, 3000);
            }, () => { prompt("Copy link:", text); });
        }
    </script>
</body>
</html>





