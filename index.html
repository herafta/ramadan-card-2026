<script>
        const content = {
            ar: {
                dir: "rtl",
                title: "Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ", subTitle: "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø´Ù‡Ø± Ø§Ù„Ø®ÙŠØ± ÙˆØ§Ù„Ø±Ø­Ù…Ø©", ticker: "ğŸŒ™ ØªÙ‡Ù†Ø¦Ø© Ø®Ø§ØµØ© Ø¨Ù…Ù†Ø§Ø³Ø¨Ø© Ø­Ù„ÙˆÙ„ Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ Ù…Ù† Ø§Ù„Ù…ØµÙ…Ù… ÙŠÙˆÙ†Ø³ Ø§Ù„Ø´ÙŠØ® Ø£Ø¨Ùˆ ØªÙŠÙ… | ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†Ø§ ÙˆÙ…Ù†ÙƒÙ… ØµØ§Ù„Ø­ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ğŸŒ™",
                to: "Ø¥Ù„Ù‰ Ø§Ù„ØºØ§Ù„ÙŠ/Ø©:", from: "Ù…Ù†:", defaultSender: "ÙØ§Ø¹Ù„ Ø®ÙŠØ±", defaultRecipient: "Ø²Ø§Ø¦Ø±Ù†Ø§ Ø§Ù„ÙƒØ±ÙŠÙ…", footer: "ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ… Ø¨Ø®ÙŠØ±",
                controlsTitle: "ğŸ‘‡ Ø£Ù†Ø´Ø¦ Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©", labelSender: "Ø§Ø³Ù…Ùƒ (Ø§Ù„Ù…Ø±Ø³Ù„):", labelRecipient: "Ø§Ø³Ù… Ù…Ù† ØªØ­Ø¨:",
                placeholderSender: "Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯...", placeholderRecipient: "Ù…Ø«Ø§Ù„: Ø®Ø§Ù„Ø¯...",
                btnDua: "ØªØ­Ø¯ÙŠØ«", btnShare: "Ù…Ø´Ø§Ø±ÙƒØ©", btnDownload: "ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø©", toast: "ØªÙ… Ø§Ù„Ù†Ø³Ø®!",
                shareMsg: "ğŸŒ™ ØªÙ‡Ù†Ø¦Ø© Ø®Ø§ØµØ© Ø¨Ù…Ù†Ø§Ø³Ø¨Ø© Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ", titleNafahat: "Ù†ÙØ­Ø§Øª", titleAdvice: "Ù†ØµÙŠØ­Ø©", titleTasbih: "Ù…Ø³Ø¨Ø­Ø©", tapText: "Ø§Ø¶ØºØ· Ù„Ù„ØªØ³Ø¨ÙŠØ­",
                ramadanWait: "Ø±Ù…Ø¶Ø§Ù† ÙŠÙ‚ØªØ±Ø¨ .. ÙˆØ§Ù„Ù‚Ù„Ø¨ ÙŠØ±ØªÙ‚Ø¨", days: "ÙŠÙˆÙ…", hours: "Ø³Ø§Ø¹Ø©",
                themeNames: { default: "ğŸŒŒ Ø§Ù„Ù„ÙŠØ§Ù„ÙŠ", emerald: "ğŸŒ¿ Ø§Ù„Ø²Ù…Ø±Ø¯", scroll: "ğŸ“œ Ø§Ù„Ù…Ø®Ø·ÙˆØ·Ø©", ruby: "ğŸ‘‘ Ø§Ù„ÙŠØ§Ù‚ÙˆØª", mirage: "ğŸŒ«ï¸ Ø§Ù„Ø³Ø±Ø§Ø¨", space: "ğŸª Ø§Ù„ÙØ¶Ø§Ø¡", ceramic: "ğŸº Ø§Ù„Ø®Ø²Ù", sunset: "ğŸŒ… Ø§Ù„ØºØ±ÙˆØ¨", pearl: "ğŸš Ø§Ù„Ù„Ø¤Ù„Ø¤", kaaba: "ğŸ•‹ Ø§Ù„ÙƒØ¹Ø¨Ø©" },
                duas: ["Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø¹ØªÙ‚Ø§Ø¦Ùƒ Ù…Ù† Ø§Ù„Ù†Ø§Ø±.", "Ù…Ø¨Ø§Ø±Ùƒ Ø¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø´Ù‡Ø±ØŒ Ø£Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ø§Ù„Ù‚Ø¨ÙˆÙ„.", "Ø§Ù„Ù„Ù‡Ù… Ø³Ù„Ù…Ù†Ø§ Ù„Ø±Ù…Ø¶Ø§Ù†ØŒ ÙˆØ³Ù„Ù… Ø±Ù…Ø¶Ø§Ù† Ù„Ù†Ø§."],
                nafahatList: ["Ø§Ù„ØµÙˆÙ… ØªØ±Ø¨ÙŠØ© Ù„Ù„Ø¥Ø±Ø§Ø¯Ø©.", "Ø±Ù…Ø¶Ø§Ù† ÙØ±ØµØ© Ù„Ù„ØªØºÙŠÙŠØ±.", "Ø§Ù„Ù‚Ø±Ø¢Ù† Ø±ÙˆØ­ Ø±Ù…Ø¶Ø§Ù†."],
                adviceList: ["Ù„Ø§ ØªÙƒØ«Ø± Ù…Ù† Ø§Ù„Ø·Ø¹Ø§Ù… Ø¹Ù†Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±.", "Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ ØµÙ„Ø§Ø© Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­.", "Ø®ØµØµ ÙˆÙ‚ØªØ§Ù‹ Ù„Ù„Ø¯Ø¹Ø§Ø¡."]
            },
            en: { 
                dir: "ltr", title: "Ramadan Mubarak", subTitle: "Welcome to the month of mercy", ticker: "ğŸŒ™ Special Greeting for Ramadan by Younes Al-Sheikh Abu Taym ğŸŒ™", 
                to: "To:", from: "From:", defaultSender: "A Well Wisher", defaultRecipient: "Dear Guest", footer: "Happy Ramadan", 
                controlsTitle: "ğŸ‘‡ Create your card", labelSender: "Your Name:", labelRecipient: "Recipient Name:", 
                placeholderSender: "e.g. Ahmed...", placeholderRecipient: "e.g. John...", 
                btnDua: "Refresh", btnShare: "Share", btnDownload: "Save Image", toast: "Copied!", 
                shareMsg: "ğŸŒ™ Ramadan Greeting", titleNafahat: "Inspiration", titleAdvice: "Tip", titleTasbih: "Tasbih", tapText: "Tap to count",
                ramadanWait: "Ramadan approaches.. the heart awaits", days: "d", hours: "h",
                themeNames: { default: "ğŸŒŒ Nights", emerald: "ğŸŒ¿ Emerald", scroll: "ğŸ“œ Scroll", ruby: "ğŸ‘‘ Ruby", mirage: "ğŸŒ«ï¸ Mirage", space: "ğŸª Space", ceramic: "ğŸº Ceramic", sunset: "ğŸŒ… Sunset", pearl: "ğŸš Pearl", kaaba: "ğŸ•‹ Kaaba" },
                duas: ["May Allah accept your fasting.", "Wishing you a blessed Ramadan.", "May this Ramadan bring joy."], 
                nafahatList: ["Fasting is discipline.", "Chance for change.", "Quran is the soul."], 
                adviceList: ["Don't overeat at Iftar.", "Maintain Taraweeh.", "Make Dua frequently."] 
            },
            fr: { dir: "ltr", title: "Ramadan Mubarak", subTitle: "Bienvenue au mois de la misÃ©ricorde", ticker: "ğŸŒ™ Voeux pour le Ramadan par Younes Al-Sheikh Abu Taym ğŸŒ™", to: "Pour:", from: "De:", defaultSender: "Ami", defaultRecipient: "InvitÃ©", footer: "Joyeux Ramadan", controlsTitle: "ğŸ‘‡ CrÃ©ez votre carte", labelSender: "Votre Nom:", labelRecipient: "Destinatario:", placeholderSender: "ex: Ahmed...", placeholderRecipient: "ex: Marie...", btnDua: "Actualiser", btnShare: "Partager", btnDownload: "Image", toast: "Lien copiÃ© !", shareMsg: "ğŸŒ™ Voeux Ramadan", titleNafahat: "Inspiration", titleAdvice: "Conseil", titleTasbih: "Tasbih", tapText: "Appuyez pour compter", ramadanWait: "Ramadan approche.. le cÅ“ur attend", days: "j", hours: "h", themeNames: { default: "ğŸŒŒ Nuits", emerald: "ğŸŒ¿ Ã‰meraude", scroll: "ğŸ“œ Parchemin", ruby: "ğŸ‘‘ Rubis", mirage: "ğŸŒ«ï¸ Mirage", space: "ğŸª Espace", ceramic: "ğŸº CÃ©ramique", sunset: "ğŸŒ… Coucher", pearl: "ğŸš Perle", kaaba: "ğŸ•‹ Kaaba" }, duas: ["Qu'Allah accepte votre jeÃ»ne.", "Joyeux Ramadan.", "Que ce Ramadan apporte la joie."], nafahatList: ["Le jeÃ»ne est discipline.", "Chance de changement.", "Coran est l'Ã¢me."], adviceList: ["Mangez peu.", "Priez Tarawih.", "Faites Dua."] },
            es: { dir: "ltr", title: "RamadÃ¡n Mubarak", subTitle: "Bienvenido el mes de la misericordia", ticker: "ğŸŒ™ Saludos de RamadÃ¡n por Younes Al-Sheikh Abu Taym ğŸŒ™", to: "Para:", from: "De:", defaultSender: "Amigo", defaultRecipient: "Invitado", footer: "Feliz RamadÃ¡n", controlsTitle: "ğŸ‘‡ Crea tu tarjeta", labelSender: "Tu Nombre:", labelRecipient: "Destinatario:", placeholderSender: "ej: Ahmed...", placeholderRecipient: "ej: Juan...", btnDua: "Actualizar", btnShare: "Compartir", btnDownload: "Imagen", toast: "Â¡Copiado!", shareMsg: "ğŸŒ™ Saludos de RamadÃ¡n", titleNafahat: "InspiraciÃ³n", titleAdvice: "Consejo", titleTasbih: "Tasbih", tapText: "Toca para contar", ramadanWait: "RamadÃ¡n se acerca.. el corazÃ³n espera", days: "d", hours: "h", themeNames: { default: "ğŸŒŒ Noches", emerald: "ğŸŒ¿ Esmeralda", scroll: "ğŸ“œ Pergamino", ruby: "ğŸ‘‘ RubÃ­", mirage: "ğŸŒ«ï¸ Espejismo", space: "ğŸª Espacio", ceramic: "ğŸº CerÃ¡mica", sunset: "ğŸŒ… Ocaso", pearl: "ğŸš Perla", kaaba: "ğŸ•‹ Kaaba" }, duas: ["Que Allah acepte tu ayuno.", "Bendito RamadÃ¡n.", "AlegrÃ­a en RamadÃ¡n."], nafahatList: ["Ayuno es disciplina.", "Oportunidad de cambio.", "CorÃ¡n es el alma."], adviceList: ["No comas en exceso.", "Oraciones de Tarawih.", "Haz Dua."] },
            zh: { dir: "ltr", title: "æ–‹æœˆå‰åº†", subTitle: "æ¬¢è¿æ¥åˆ°æ…ˆæ‚¯ä¹‹æœˆ", ticker: "ğŸŒ™ Younes Al-Sheikh Abu Taym çš„æ–‹æœˆç¥ç¦ ğŸŒ™", to: "è‡´:", from: "æ¥è‡ª:", defaultSender: "æœ‹å‹", defaultRecipient: "è´µå®¢", footer: "æ–‹æœˆå¿«ä¹", controlsTitle: "ğŸ‘‡ åˆ¶ä½œè´ºå¡", labelSender: "ä½ çš„åå­—:", labelRecipient: "æ”¶ä»¶äºº:", placeholderSender: "ä¾‹å¦‚: é˜¿é‡Œ...", placeholderRecipient: "ä¾‹å¦‚: ç©†ç½•é»˜å¾·...", btnDua: "åˆ·æ–°", btnShare: "åˆ†äº«", btnDownload: "ä¿å­˜å›¾ç‰‡", toast: "å·²å¤åˆ¶ï¼", shareMsg: "ğŸŒ™ æ–‹æœˆç¥ç¦", titleNafahat: "çµæ„Ÿ", titleAdvice: "å»ºè®®", titleTasbih: "èµä»¥æ­¤", tapText: "ç‚¹å‡»è®¡æ•°", ramadanWait: "æ–‹æœˆä¸´è¿‘.. å¿ƒåœ¨ç­‰å¾…", days: "å¤©", hours: "å°æ—¶", themeNames: { default: "ğŸŒŒ å¤œæ™š", emerald: "ğŸŒ¿ ç¿¡ç¿ ", scroll: "ğŸ“œ å·è½´", ruby: "ğŸ‘‘ çº¢å®çŸ³", mirage: "ğŸŒ«ï¸ æµ·å¸‚èœƒæ¥¼", space: "ğŸª å¤ªç©º", ceramic: "ğŸº é™¶ç“·", sunset: "ğŸŒ… æ—¥è½", pearl: "ğŸš çç ", kaaba: "ğŸ•‹ å¤©æˆ¿" }, duas: ["æ„¿çœŸä¸»æ¥å—æ–‹æˆ’ã€‚", "æ–‹æœˆå‰åº†ã€‚", "æ„¿æ–‹æœˆå¸¦æ¥å–œæ‚¦ã€‚"], nafahatList: ["æ–‹æˆ’æ˜¯è‡ªå¾‹ã€‚", "æ”¹å˜çš„æœºä¼šã€‚", "å¤å…°ç»æ˜¯çµé­‚ã€‚"], adviceList: ["ä¸è¦æš´é¥®æš´é£Ÿã€‚", "åšæŒç¤¼æ‹œã€‚", "å¤šåšæœé˜¿ã€‚"] },
            ja: { dir: "ltr", title: "ãƒ©ãƒãƒ€ãƒ³ãƒ»ãƒ ãƒãƒ©ã‚¯", subTitle: "æ…ˆæ‚²ã®æœˆã¸ã‚ˆã†ã“ã", ticker: "ğŸŒ™ Younes Al-Sheikh Abu Taym ã‹ã‚‰ã®æŒ¨æ‹¶ ğŸŒ™", to: "ã¸:", from: "ã‹ã‚‰:", defaultSender: "å‹äºº", defaultRecipient: "ã‚²ã‚¹ãƒˆ", footer: "ãƒ©ãƒãƒ€ãƒ³ãŠã‚ã§ã¨ã†", controlsTitle: "ğŸ‘‡ ã‚«ãƒ¼ãƒ‰ä½œæˆ", labelSender: "åå‰:", labelRecipient: "å—å–äºº:", placeholderSender: "ä¾‹: ã‚¢ãƒª...", placeholderRecipient: "ä¾‹: ã‚¿ãƒŠã‚«...", btnDua: "æ›´æ–°", btnShare: "å…±æœ‰", btnDownload: "ç”»åƒã‚’ä¿å­˜", toast: "ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼", shareMsg: "ğŸŒ™ ãƒ©ãƒãƒ€ãƒ³ã®æŒ¨æ‹¶", titleNafahat: "ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³", titleAdvice: "ãƒ’ãƒ³ãƒˆ", titleTasbih: "ã‚¿ã‚¹ãƒ“ãƒ¼", tapText: "ã‚¿ãƒƒãƒ—ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆ", ramadanWait: "ãƒ©ãƒãƒ€ãƒ³ãŒè¿‘ã¥ã„ã¦ã„ã¾ã™..", days: "æ—¥", hours: "æ™‚é–“", themeNames: { default: "ğŸŒŒ å¤œ", emerald: "ğŸŒ¿ ã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰", scroll: "ğŸ“œ å·»ç‰©", ruby: "ğŸ‘‘ ãƒ«ãƒ“ãƒ¼", mirage: "ğŸŒ«ï¸ èœƒæ°—æ¥¼", space: "ğŸª å®‡å®™", ceramic: "ğŸº é™¶å™¨", sunset: "ğŸŒ… å¤•æ—¥", pearl: "ğŸš çœŸç ", kaaba: "ğŸ•‹ ã‚«ã‚¢ãƒ" }, duas: ["æ–­é£ŸãŒå—ã‘å…¥ã‚Œã‚‰ã‚Œã¾ã™ã‚ˆã†ã«ã€‚", "ç¥ç¦ã•ã‚ŒãŸãƒ©ãƒãƒ€ãƒ³ã‚’ã€‚", "å–œã³ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã‚ˆã†ã«ã€‚"], nafahatList: ["æ–­é£Ÿã¯è¦å¾‹ã§ã™ã€‚", "å¤‰åŒ–ã®æ©Ÿä¼šã§ã™ã€‚", "ã‚³ãƒ¼ãƒ©ãƒ³ã¯é­‚ã§ã™ã€‚"], adviceList: ["é£Ÿã¹éããªã„ã§ã€‚", "ç¥ˆã‚Šã‚’ç¶šã‘ã¦ã€‚", "ãƒ‰ã‚¥ã‚¢ã‚’ã—ã¦ã€‚"] },
            tr: { dir: "ltr", title: "HayÄ±rlÄ± Ramazanlar", subTitle: "Rahmet ayÄ± hoÅŸ geldin", ticker: "ğŸŒ™ Younes Al-Sheikh Abu Taym'dan Ramazan TebriÄŸi ğŸŒ™", to: "SayÄ±n:", from: "GÃ¶nderen:", defaultSender: "Dost", defaultRecipient: "Misafir", footer: "BayramÄ±nÄ±z MÃ¼barek Olsun", controlsTitle: "ğŸ‘‡ Kart oluÅŸtur", labelSender: "AdÄ±nÄ±z:", labelRecipient: "AlÄ±cÄ±:", placeholderSender: "Ã–rn: Ahmet...", placeholderRecipient: "Ã–rn: Mehmet...", btnDua: "Yenile", btnShare: "PaylaÅŸ", btnDownload: "Resmi Ä°ndir", toast: "KopyalandÄ±!", shareMsg: "ğŸŒ™ Ramazan TebriÄŸi", titleNafahat: "Ä°lham", titleAdvice: "Tavsiye", titleTasbih: "Tesbih", tapText: "Saymak iÃ§in dokun", ramadanWait: "Ramazan yaklaÅŸÄ±yor.. Kalp bekliyor", days: "g", hours: "s", themeNames: { default: "ğŸŒŒ Geceler", emerald: "ğŸŒ¿ ZÃ¼mrÃ¼t", scroll: "ğŸ“œ ParÅŸÃ¶men", ruby: "ğŸ‘‘ Yakut", mirage: "ğŸŒ«ï¸ Serap", space: "ğŸª Uzay", ceramic: "ğŸº Seramik", sunset: "ğŸŒ… GÃ¼n BatÄ±mÄ±", pearl: "ğŸš Ä°nci", kaaba: "ğŸ•‹ Kabe" }, duas: ["Allah kabul etsin.", "Bereketli Ramazanlar.", "HayÄ±rlÄ± Ramazanlar."], nafahatList: ["OruÃ§ sabÄ±rdÄ±r.", "Yenilenme fÄ±rsatÄ±.", "Kuran kalbidir."], adviceList: ["AÅŸÄ±rÄ± yemeyin.", "Teravih kÄ±lÄ±n.", "Dua edin."] },
            de: { dir: "ltr", title: "Ramadan Mubarak", subTitle: "Monat der Barmherzigkeit", ticker: "ğŸŒ™ Ramadan GrÃ¼ÃŸe von Younes Al-Sheikh Abu Taym ğŸŒ™", to: "FÃ¼r:", from: "Von:", defaultSender: "Freund", defaultRecipient: "Gast", footer: "Frohen Ramadan", controlsTitle: "ğŸ‘‡ Karte erstellen", labelSender: "Dein Name:", labelRecipient: "EmpfÃ¤nger:", placeholderSender: "z.B. Ahmed...", placeholderRecipient: "z.B. Lukas...", btnDua: "Neu", btnShare: "Teilen", btnDownload: "Bild speichern", toast: "Kopiert!", shareMsg: "ğŸŒ™ Ramadan GrÃ¼ÃŸe", titleNafahat: "Inspiration", titleAdvice: "Tipp", titleTasbih: "Tasbih", tapText: "Tippen zum ZÃ¤hlen", ramadanWait: "Ramadan naht.. das Herz wartet", days: "t", hours: "std", themeNames: { default: "ğŸŒŒ NÃ¤chte", emerald: "ğŸŒ¿ Smaragd", scroll: "ğŸ“œ Schriftrolle", ruby: "ğŸ‘‘ Rubin", mirage: "ğŸŒ«ï¸ Fata Morgana", space: "ğŸª Weltraum", ceramic: "ğŸº Keramik", sunset: "ğŸŒ… Sonnenuntergang", pearl: "ğŸš Perle", kaaba: "ğŸ•‹ Kaaba" }, duas: ["MÃ¶ge Allah annehmen.", "Gesegneten Ramadan.", "Frieden sei mit dir."], nafahatList: ["Fasten ist Geduld.", "Eine Chance.", "Der Koran ist die Seele."], adviceList: ["Iss nicht zu viel.", "Verrichte Gebete.", "Bitte Allah."] }
        };

        let currentLang = 'ar';
        let tasbihCount = 0;
        let audioPlaying = false;
        const audio = document.getElementById('ramadanAudio');

        document.addEventListener("DOMContentLoaded", function() {
            initPage();
            startFallingEffect();
            updateCountdown();
            setInterval(updateCountdown, 60000);
        });

        function initPage() {
            const urlParams = new URLSearchParams(window.location.search);
            const langParam = urlParams.get('lang');
            if (langParam && content[langParam]) {
                currentLang = langParam;
                document.getElementById('languageSelector').value = currentLang;
            }
            changeLanguage(currentLang);

            const themeParam = urlParams.get('theme');
            if (themeParam) {
                changeTheme(themeParam);
                document.getElementById('themeSelector').value = themeParam;
            }

            let sharedSender = urlParams.get('sender');
            let sharedRecipient = urlParams.get('recipient');
            const senderInput = document.getElementById('senderInput');
            const recipientInput = document.getElementById('recipientInput');
            if (sharedSender) try { senderInput.value = decodeURIComponent(sharedSender); } catch(e) {}
            if (sharedRecipient) try { recipientInput.value = decodeURIComponent(sharedRecipient); } catch(e) {}

            updateCardLive();
            randomizeAll();
        }

        function changeTheme(themeName) {
            document.body.setAttribute('data-theme', themeName);
        }

        function changeLanguage(lang) {
            currentLang = lang;
            const t = content[lang];
            document.documentElement.dir = t.dir;
            document.documentElement.lang = lang;

            document.getElementById('tickerText').textContent = t.ticker;
            document.getElementById('tickerText').className = `ticker-content ${t.dir === 'rtl' ? 'ticker-rtl' : 'ticker-ltr'}`;
            
            document.getElementById('mainTitle').textContent = t.title;
            document.getElementById('subTitle').textContent = t.subTitle;
            document.getElementById('toLabel').textContent = t.to;
            document.getElementById('fromLabel').textContent = t.from;
            document.getElementById('footerText').textContent = t.footer;
            document.getElementById('controlsTitle').textContent = t.controlsTitle;
            document.getElementById('labelSenderInput').textContent = t.labelSender;
            document.getElementById('labelRecipientInput').textContent = t.labelRecipient;
            document.getElementById('senderInput').placeholder = t.placeholderSender;
            document.getElementById('recipientInput').placeholder = t.placeholderRecipient;
            document.getElementById('btnDuaText').textContent = t.btnDua;
            document.getElementById('btnShareText').textContent = t.btnShare;
            document.getElementById('btnDownloadText').textContent = t.btnDownload;

            document.getElementById('titleNafahat').textContent = t.titleNafahat;
            document.getElementById('titleAdvice').textContent = t.titleAdvice;
            document.getElementById('titleTasbih').textContent = t.titleTasbih;
            document.getElementById('tapText').textContent = t.tapText;
            
            // ØªÙ… Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø®Ø·Ø£ Ù‡Ù†Ø§ (ØªÙ… Ø¥Ø²Ø§Ù„Ø© eidLabel ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù… ramadanWaitText)
            const waitTextEl = document.getElementById('ramadanWaitText');
            if (waitTextEl) {
                waitTextEl.textContent = t.ramadanWait;
            }

            const themeSelect = document.getElementById('themeSelector');
            Array.from(themeSelect.options).forEach(option => {
                if (t.themeNames[option.value]) option.text = t.themeNames[option.value];
            });

            updateCardLive();
            randomizeAll();
            updateCountdown();
        }

        function updateCardLive() {
            const t = content[currentLang];
            const senderVal = document.getElementById('senderInput').value;
            const recipientVal = document.getElementById('recipientInput').value;
            document.getElementById('displaySender').textContent = senderVal.trim() === "" ? t.defaultSender : senderVal;
            document.getElementById('displayRecipient').textContent = recipientVal.trim() === "" ? t.defaultRecipient : recipientVal;
        }

        function randomizeAll() {
            const t = content[currentLang];
            const randomDua = t.duas[Math.floor(Math.random() * t.duas.length)];
            const randomNafaha = t.nafahatList[Math.floor(Math.random() * t.nafahatList.length)];
            const randomAdvice = t.adviceList[Math.floor(Math.random() * t.adviceList.length)];

            setTextWithFade('randomDua', randomDua);
            setTextWithFade('textNafahat', randomNafaha);
            setTextWithFade('textAdvice', randomAdvice);
        }

        function setTextWithFade(id, text) {
            const el = document.getElementById(id);
            if (el) {
                el.style.opacity = 0;
                setTimeout(() => { el.textContent = text; el.style.opacity = 1; }, 300);
            }
        }

        function incrementTasbih() {
            tasbihCount++;
            const el = document.getElementById('tasbihCount');
            if(el) {
                el.textContent = tasbihCount;
                el.style.transform = "scale(1.2)";
                setTimeout(() => el.style.transform = "scale(1)", 150);
            }
        }

        function toggleAudio() {
            const btn = document.getElementById('audioBtn');
            if (audioPlaying) {
                audio.pause();
                btn.innerHTML = "ğŸ”ˆ";
                btn.classList.remove("audio-pulse");
            } else {
                audio.play();
                btn.innerHTML = "ğŸ”Š";
                btn.classList.add("audio-pulse");
            }
            audioPlaying = !audioPlaying;
        }

        function startFallingEffect() {
            const container = document.getElementById('fallingContainer');
            const symbols = ['â˜…', 'âœ¦', 'â€¢']; 
            setInterval(() => {
                const el = document.createElement('div');
                el.classList.add('fall-item');
                el.innerText = symbols[Math.floor(Math.random() * symbols.length)];
                el.style.left = Math.random() * 100 + 'vw';
                el.style.fontSize = (Math.random() * 10 + 10) + 'px';
                el.style.animationDuration = (Math.random() * 3 + 5) + 's';
                container.appendChild(el);
                setTimeout(() => el.remove(), 8000);
            }, 800);
        }

        function updateCountdown() {
            const ramadanDate = new Date('2026-02-17T00:00:00'); 
            const now = new Date();
            const diff = ramadanDate - now;
            const el = document.getElementById('ramadanCountdown');
            if (!el) return;

            if (diff > 0) {
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const t = content[currentLang];
                el.textContent = `${days} ${t.days}, ${hours} ${t.hours}`;
            } else {
                el.textContent = "Ramadan Kareem!";
            }
        }

        function downloadImage() {
            const btn = document.querySelector('.btn-download');
            const originalText = btn.innerHTML;
            btn.innerHTML = "âŒ› ...";

            const tempContainer = document.createElement('div');
            tempContainer.setAttribute('id', 'temp-capture-container');
            tempContainer.style.position = 'absolute';
            tempContainer.style.left = '-9999px'; 
            tempContainer.style.top = '0';
            tempContainer.style.width = document.querySelector('.main-container').offsetWidth + 'px';
            tempContainer.style.maxWidth = '800px';
            tempContainer.style.textAlign = 'center';
            tempContainer.style.padding = '20px';
            
            // **Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø´ÙØ§ÙØ© ÙÙŠ Ø§Ù„Ø«ÙŠÙ…Ø§Øª Ø§Ù„Ø¯Ø§ÙƒÙ†Ø©**
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„ÙØ¹Ù„ÙŠ Ù„Ù„Ø®Ù„ÙÙŠØ© Ù…Ù† Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØªØ·Ø¨ÙŠÙ‚Ù‡ ØµØ±Ø§Ø­Ø©Ù‹
            const computedStyle = getComputedStyle(document.body);
            tempContainer.style.background = computedStyle.getPropertyValue('--bg-body');
            
            const currentTheme = document.body.getAttribute('data-theme');
            tempContainer.setAttribute('data-theme', currentTheme);
            tempContainer.style.fontFamily = computedStyle.fontFamily;
            tempContainer.style.color = computedStyle.color;

            document.body.appendChild(tempContainer);

            const originalToBeCaptured = document.getElementById('toBeCaptured');
            const clonedToBeCaptured = originalToBeCaptured.cloneNode(true);
            const originalFeaturesGrid = document.querySelector('.features-grid');
            const clonedFeaturesGrid = originalFeaturesGrid.cloneNode(true);

            // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³Ø¨Ø­Ø© ÙÙŠ Ø§Ù„ØµÙˆØ±Ø© ÙÙ‚Ø· Ù„ØªØ¸Ù‡Ø± ÙƒØ¯Ø¹Ø§Ø¡
            const tasbihCard = clonedFeaturesGrid.querySelector('.tasbih-card');
            if (tasbihCard) {
                tasbihCard.innerHTML = '<span style="font-family: var(--font-head); font-size: 1.1rem; color: var(--primary); font-weight: bold; line-height: 1.6;">Ø§Ù„Ù„Ù‡Ù… ØµÙ„ Ø¹Ù„Ù‰ Ø³ÙŠØ¯Ù†Ø§ Ù…Ø­Ù…Ø¯</span>';
                tasbihCard.removeAttribute('onclick');
                tasbihCard.style.cursor = 'default';
                tasbihCard.style.display = 'flex';
                tasbihCard.style.alignItems = 'center';
                tasbihCard.style.justifyContent = 'center';
                tasbihCard.style.minHeight = '130px';
            }

            tempContainer.appendChild(clonedToBeCaptured);
            const spacer = document.createElement('div');
            spacer.style.height = '20px';
            tempContainer.appendChild(spacer);
            tempContainer.appendChild(clonedFeaturesGrid);

            html2canvas(tempContainer, {
                backgroundColor: null, // Ù†ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ø£Ù†Ù†Ø§ Ø¶Ø¨Ø·Ù†Ø§ Ø§Ù„Ø®Ù„ÙÙŠØ© ÙŠØ¯ÙˆÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰
                scale: 2,
                useCORS: true
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'Ramadan-Greeting-Card.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
                document.body.removeChild(tempContainer);
                btn.innerHTML = originalText;
            }).catch(err => {
                console.error(err);
                alert("Error capturing image.");
                document.body.removeChild(tempContainer);
                btn.innerHTML = originalText;
            });
        }

        async function shareGreeting() {
            const senderVal = document.getElementById('senderInput').value.trim();
            const recipientVal = document.getElementById('recipientInput').value.trim();
            const currentTheme = document.body.getAttribute('data-theme') || 'default';
            const t = content[currentLang];

            const baseUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
            const shareUrl = `${baseUrl}?sender=${encodeURIComponent(senderVal)}&recipient=${encodeURIComponent(recipientVal)}&lang=${currentLang}&theme=${currentTheme}`;
            
            const shareText = `${t.shareMsg}\n${t.from} ${senderVal || t.defaultSender}\n${t.to} ${recipientVal || t.defaultRecipient}\n\nğŸ‘‡`;

            if (navigator.share) {
                try {
                    await navigator.share({ title: t.title, text: shareText, url: shareUrl });
                } catch (err) { console.log('Error sharing:', err); }
            } else {
                copyToClipboard(shareUrl);
            }
        }

        function copyToClipboard(text) {
            const toast = document.getElementById('toast');
            const t = content[currentLang];
            navigator.clipboard.writeText(text).then(() => {
                toast.textContent = t.toast;
                toast.className = "show";
                setTimeout(function(){ toast.className = toast.className.replace("show", ""); }, 3000);
            }, () => { prompt("Copy link:", text); });
        }
    </script>
