<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ramadan Greeting Card</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Reem+Kufi:wght@400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-gold: #c5a059;
            --bright-gold: #ffd700;
            --dark-blue: #0f172a;
            --accent-green: #10b981;
            --text-light: #f8fafc;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Reem Kufi', 'Poppins', sans-serif; /* Ø®Ø· Ø°ÙƒÙŠ ÙŠØ¯Ø¹Ù… Ø§Ù„Ù„ØºØªÙŠÙ† */
            background-color: var(--dark-blue);
            background-image: radial-gradient(circle at 50% 10%, #1e293b 0%, #0f172a 100%);
            color: var(--text-light);
            overflow-x: hidden;
            min-height: 100vh;
            padding-bottom: 40px;
            transition: all 0.3s ease;
        }

        /* --- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ© --- */
        .lang-switch {
            position: absolute;
            top: 50px; /* Ø£Ø³ÙÙ„ Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± */
            left: 20px; /* Ø³ÙŠØªØºÙŠØ± Ù…ÙƒØ§Ù†Ù‡ Ø­Ø³Ø¨ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ */
            z-index: 100;
        }
        
        /* Ø¶Ø¨Ø· Ù…ÙƒØ§Ù† Ø§Ù„Ø²Ø± Ø­Ø³Ø¨ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ */
        html[dir="rtl"] .lang-switch { left: 20px; right: auto; }
        html[dir="ltr"] .lang-switch { right: 20px; left: auto; }

        select {
            background: rgba(0,0,0,0.6);
            color: #fff;
            border: 1px solid var(--primary-gold);
            padding: 5px 10px;
            border-radius: 20px;
            font-family: inherit;
            cursor: pointer;
            outline: none;
        }

        /* --- Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± --- */
        .news-ticker {
            background: linear-gradient(90deg, #b8860b, #daa520);
            color: #000;
            padding: 8px 0;
            font-weight: bold;
            font-family: 'Amiri', 'Poppins', serif;
            position: fixed; top: 0; width: 100%; z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3); font-size: 0.9rem;
        }
        .ticker-content { white-space: nowrap; display: inline-block; padding-left: 100%; }
        
        /* Ø­Ø±ÙƒØ© Ø§Ù„Ø´Ø±ÙŠØ· ØªØªØºÙŠØ± Ø­Ø³Ø¨ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ */
        .ticker-rtl { animation: ticker-rtl 30s linear infinite; direction: ltr; text-align: right;}
        .ticker-ltr { animation: ticker-ltr 30s linear infinite; }

        @keyframes ticker-rtl { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
        @keyframes ticker-ltr { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        /* --- Ø§Ù„ÙÙˆØ§Ù†ÙŠØ³ --- */
        .lanterns-container {
            position: absolute; top: 40px; width: 100%;
            display: flex; justify-content: space-between; padding: 0 10px;
            z-index: 5; pointer-events: none;
        }
        .lantern { width: 60px; height: auto; transform-origin: top center; filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.5)); }
        .l-left { animation: swing 3s infinite alternate; margin-left: 5%; }
        .l-right { animation: swing 4s infinite alternate; margin-right: 5%; width: 80px; }
        .l-center { animation: swing 5s infinite alternate; width: 50px; position: absolute; left: 50%; transform: translateX(-50%); top: -10px;}
        @keyframes swing { 0% { transform: rotate(5deg); } 100% { transform: rotate(-5deg); } }

        /* --- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ --- */
        .main-container {
            position: relative; z-index: 10; max-width: 800px;
            margin: 100px auto 40px; text-align: center; padding: 20px;
        }

        .moon-icon {
            font-size: 5rem; color: var(--bright-gold);
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
            animation: float 6s infinite; margin-bottom: 20px; display: inline-block;
        }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }

        h1 {
            font-family: 'Amiri', 'Poppins', serif; font-size: 3rem; color: var(--bright-gold);
            margin-bottom: 10px; text-shadow: 2px 2px 4px #000;
        }

        .greeting-card {
            background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px);
            border: 2px solid var(--primary-gold); border-radius: 20px;
            padding: 30px; margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .greeting-label { font-size: 1rem; color: #cbd5e1; margin-bottom: 5px; opacity: 0.8; }
        .recipient-name {
            font-size: 2.5rem; color: var(--accent-green);
            font-family: 'Amiri', 'Poppins', serif; margin-bottom: 15px; display: block;
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
        }

        .dua-text { font-size: 1.2rem; line-height: 1.6; margin: 20px 0; color: #e2e8f0; font-style: italic; }

        .sender-section { margin-top: 25px; border-top: 1px solid rgba(197, 160, 89, 0.3); padding-top: 15px; }
        .sender-name { color: var(--primary-gold); font-family: 'Amiri', 'Poppins', serif; font-size: 1.4rem; font-weight: bold; }

        .controls {
            margin-top: 40px; background: rgba(0,0,0,0.4); padding: 25px;
            border-radius: 15px; border: 1px solid rgba(255, 215, 0, 0.1);
        }

        .input-group { margin-bottom: 15px; }
        /* Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù†Øµ Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ© */
        html[dir="rtl"] .input-group { text-align: right; }
        html[dir="ltr"] .input-group { text-align: left; }

        .input-label { color: var(--primary-gold); font-size: 0.9rem; margin-bottom: 5px; display: block; }

        input[type="text"] {
            width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--primary-gold);
            background: rgba(255,255,255,0.1); color: #fff;
            font-family: inherit; font-size: 1.1rem; text-align: center;
        }

        .btn-group { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 20px; }

        button {
            padding: 12px 30px; border: none; border-radius: 8px; cursor: pointer;
            font-family: inherit; font-weight: bold; font-size: 1rem;
            display: flex; align-items: center; justify-content: center; gap: 8px; min-width: 150px;
        }

        .btn-generate { background: linear-gradient(45deg, var(--primary-gold), #daa520); color: #000; }
        .btn-share { background: var(--accent-green); color: #fff; }

        #toast {
            visibility: hidden; min-width: 250px; background-color: #333; color: #fff;
            text-align: center; border-radius: 8px; padding: 16px; position: fixed;
            z-index: 2000; left: 50%; bottom: 30px; transform: translateX(-50%);
            border-bottom: 4px solid var(--accent-green);
        }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }

        @media (max-width: 600px) {
            h1 { font-size: 2.2rem; }
            .lantern { width: 45px; } .l-right { width: 65px; }
            button { width: 100%; }
        }
        .lantern-svg { fill: rgba(255, 215, 0, 0.8); }
    </style>
</head>
<body>

    <div class="lang-switch">
        <select id="languageSelector" onchange="changeLanguage(this.value)">
            <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
            <option value="en">ğŸ‡¬ğŸ‡§ English</option>
            <option value="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
            <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
        </select>
    </div>

    <div class="news-ticker">
        <div class="ticker-content" id="tickerText">
            </div>
    </div>

    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; opacity: 0.1; background-image: url('data:image/svg+xml,...');"></div>

    <div class="lanterns-container">
        <div class="lantern l-left"><svg viewBox="0 0 100 200" class="lantern-svg"><path d="M50,0 L50,20 M20,20 L80,20 L90,60 L10,60 L20,20 M10,60 L90,60 L80,150 L20,150 L10,60 M40,150 L40,180 M60,150 L60,180 M30,180 L70,180" stroke="#ffd700" stroke-width="2" fill="rgba(255,215,0,0.2)"/><circle cx="50" cy="100" r="15" fill="#ffd700" filter="blur(5px)"/></svg></div>
        <div class="lantern l-center"><svg viewBox="0 0 100 200" class="lantern-svg"><path d="M50,0 L50,30 M30,30 L70,30 L80,70 L20,70 L30,30 M20,70 L80,70 L70,140 L30,140 L20,70 M45,140 L45,170 M55,140 L55,170 M35,170 L65,170" stroke="#ffd700" stroke-width="2" fill="rgba(255,215,0,0.2)"/><circle cx="50" cy="100" r="10" fill="#ffd700" filter="blur(5px)"/></svg></div>
        <div class="lantern l-right"><svg viewBox="0 0 100 200" class="lantern-svg"><path d="M50,0 L50,20 M20,20 L80,20 L90,60 L10,60 L20,20 M10,60 L90,60 L80,150 L20,150 L10,60 M40,150 L40,180 M60,150 L60,180 M30,180 L70,180" stroke="#ffd700" stroke-width="2" fill="rgba(255,215,0,0.2)"/><circle cx="50" cy="100" r="15" fill="#ffd700" filter="blur(5px)"/></svg></div>
    </div>

    <div class="main-container">
        <div class="moon-icon">ğŸŒ™</div>
        <h1 id="mainTitle">Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ</h1>
        <p id="subTitle" style="font-size: 1.2rem; opacity: 0.8;">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø´Ù‡Ø± Ø§Ù„Ø®ÙŠØ± ÙˆØ§Ù„Ø±Ø­Ù…Ø©</p>

        <div class="greeting-card" id="cardArea">
            <p class="greeting-label" id="toLabel">Ø¥Ù„Ù‰ Ø§Ù„ØºØ§Ù„ÙŠ/Ø©:</p>
            <span class="recipient-name" id="displayRecipient">Ø²Ø§Ø¦Ø±Ù†Ø§ Ø§Ù„ÙƒØ±ÙŠÙ…</span>
            
            <hr style="border-color: rgba(255,215,0,0.3); margin: 10px 0;">
            
            <p class="dua-text" id="randomDua">...</p>
            
            <div class="sender-section">
                <p class="greeting-label" id="fromLabel">Ù…Ù†:</p>
                <span class="sender-name" id="displaySender">ÙØ§Ø¹Ù„ Ø®ÙŠØ±</span>
            </div>
            
            <p id="footerText" style="font-size: 0.9rem; color: var(--primary-gold); margin-top: 15px;">ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ… Ø¨Ø®ÙŠØ±</p>
        </div>

        <div class="controls">
            <h3 id="controlsTitle" style="margin-bottom: 20px; color: var(--bright-gold);">ğŸ‘‡ Ø£Ù†Ø´Ø¦ Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©</h3>
            
            <div class="input-group">
                <label class="input-label" id="labelSenderInput">Ø§Ø³Ù…Ùƒ (Ø§Ù„Ù…Ø±Ø³Ù„):</label>
                <input type="text" id="senderInput" oninput="updateCardLive()" autocomplete="off">
            </div>

            <div class="input-group">
                <label class="input-label" id="labelRecipientInput">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„:</label>
                <input type="text" id="recipientInput" oninput="updateCardLive()" autocomplete="off">
            </div>

            <div class="btn-group">
                <button class="btn-generate" onclick="randomizeDua()">
                    <span>âœ¨</span> <span id="btnDuaText">Ø¯Ø¹Ø§Ø¡ Ø¬Ø¯ÙŠØ¯</span>
                </button>
                <button class="btn-share" onclick="shareGreeting()">
                    <span>ğŸ”—</span> <span id="btnShareText">Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ‡Ù†Ø¦Ø©</span>
                </button>
            </div>
        </div>
    </div>

    <div id="toast">ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!</div>

    <script>
        // Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ÙƒØ§Ù…Ù„
        const content = {
            ar: {
                dir: "rtl",
                title: "Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ",
                subTitle: "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø´Ù‡Ø± Ø§Ù„Ø®ÙŠØ± ÙˆØ§Ù„Ø±Ø­Ù…Ø©",
                ticker: "ğŸŒ™ ØªÙ‡Ù†Ø¦Ø© Ø®Ø§ØµØ© Ø¨Ù…Ù†Ø§Ø³Ø¨Ø© Ø­Ù„ÙˆÙ„ Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ Ù…Ù† Ø§Ù„Ù…ØµÙ…Ù… ÙŠÙˆÙ†Ø³ Ø§Ù„Ø´ÙŠØ® Ø£Ø¨Ùˆ ØªÙŠÙ… | ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†Ø§ ÙˆÙ…Ù†ÙƒÙ… ØµØ§Ù„Ø­ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ğŸŒ™",
                to: "Ø¥Ù„Ù‰ Ø§Ù„ØºØ§Ù„ÙŠ/Ø©:",
                from: "Ù…Ù†:",
                defaultSender: "ÙØ§Ø¹Ù„ Ø®ÙŠØ±",
                defaultRecipient: "Ø²Ø§Ø¦Ø±Ù†Ø§ Ø§Ù„ÙƒØ±ÙŠÙ…",
                footer: "ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ… Ø¨Ø®ÙŠØ±",
                controlsTitle: "ğŸ‘‡ Ø£Ù†Ø´Ø¦ Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©",
                labelSender: "Ø§Ø³Ù…Ùƒ (Ø§Ù„Ù…Ø±Ø³Ù„):",
                labelRecipient: "Ø§Ø³Ù… Ù…Ù† ØªØ­Ø¨ (Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„):",
                placeholderSender: "Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ØŒ Ø£Ù…ÙŠ...",
                placeholderRecipient: "Ù…Ø«Ø§Ù„: Ø®Ø§Ù„Ø¯ØŒ Ø£Ø¨ÙŠ...",
                btnDua: "Ø¯Ø¹Ø§Ø¡ Ø¬Ø¯ÙŠØ¯",
                btnShare: "Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ‡Ù†Ø¦Ø©",
                toast: "ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·! Ø£Ø±Ø³Ù„Ù‡ Ù„Ù…Ù† ØªØ­Ø¨.",
                shareMsg: "ğŸŒ™ ØªÙ‡Ù†Ø¦Ø© Ø®Ø§ØµØ© Ø¨Ù…Ù†Ø§Ø³Ø¨Ø© Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ",
                duas: [
                    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø¹ØªÙ‚Ø§Ø¦Ùƒ Ù…Ù† Ø§Ù„Ù†Ø§Ø± ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„ÙØ¶ÙŠÙ„.",
                    "Ù…Ø¨Ø§Ø±Ùƒ Ø¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø´Ù‡Ø±ØŒ Ø£Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ø£Ù† ÙŠØ¹ÙŠÙ†ÙƒÙ… Ø¹Ù„Ù‰ ØµÙŠØ§Ù…Ù‡ ÙˆÙ‚ÙŠØ§Ù…Ù‡.",
                    "Ø§Ù„Ù„Ù‡Ù… Ø³Ù„Ù…Ù†Ø§ Ù„Ø±Ù…Ø¶Ø§Ù†ØŒ ÙˆØ³Ù„Ù… Ø±Ù…Ø¶Ø§Ù† Ù„Ù†Ø§ØŒ ÙˆØªØ³Ù„Ù…Ù‡ Ù…Ù†Ø§ Ù…ØªÙ‚Ø¨Ù„Ø§Ù‹.",
                    "Ø£Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ù„ÙƒÙ… ÙÙŠ Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† Ø­Ø³Ù†Ø§Øª ØªØªÙƒØ§Ø«Ø± ÙˆØ°Ù†ÙˆØ¨Ø§Ù‹ ØªØªÙ†Ø§Ø«Ø±."
                ]
            },
            en: {
                dir: "ltr",
                title: "Ramadan Mubarak",
                subTitle: "Welcome to the month of mercy",
                ticker: "ğŸŒ™ Special Greeting for Ramadan by Younes Al-Sheikh Abu Taym | May Allah accept our good deeds ğŸŒ™",
                to: "To:",
                from: "From:",
                defaultSender: "A Well Wisher",
                defaultRecipient: "Dear Guest",
                footer: "Happy Ramadan",
                controlsTitle: "ğŸ‘‡ Create your card",
                labelSender: "Your Name (Sender):",
                labelRecipient: "Recipient Name:",
                placeholderSender: "e.g. Ahmed, Mom...",
                placeholderRecipient: "e.g. John, Dad...",
                btnDua: "New Wish",
                btnShare: "Share Greeting",
                toast: "Link copied! Send it now.",
                shareMsg: "ğŸŒ™ Special Ramadan Greeting",
                duas: [
                    "May Allah accept your fasting and prayers in this holy month.",
                    "Wishing you a blessed Ramadan filled with peace and light.",
                    "May this Ramadan bring joy, health and wealth to you.",
                    "O Allah, let us reach Ramadan and accept our deeds."
                ]
            },
            tr: {
                dir: "ltr",
                title: "HayÄ±rlÄ± Ramazanlar",
                subTitle: "Rahmet ve bereket ayÄ± hoÅŸ geldin",
                ticker: "ğŸŒ™ TasarÄ±mcÄ± Younes Al-Sheikh Abu Taym'dan Ã–zel Ramazan TebriÄŸi | Allah dualarÄ±mÄ±zÄ± kabul etsin ğŸŒ™",
                to: "SayÄ±n:",
                from: "GÃ¶nderen:",
                defaultSender: "Bir Dost",
                defaultRecipient: "DeÄŸerli Misafir",
                footer: "Ramazan BayramÄ±nÄ±z MÃ¼barek Olsun",
                controlsTitle: "ğŸ‘‡ KartÄ±nÄ± oluÅŸtur",
                labelSender: "AdÄ±nÄ±z (GÃ¶nderen):",
                labelRecipient: "AlÄ±cÄ±nÄ±n AdÄ±:",
                placeholderSender: "Ã–rn: Ahmet, Anne...",
                placeholderRecipient: "Ã–rn: Mehmet, Baba...",
                btnDua: "Yeni Dua",
                btnShare: "TebriÄŸi PaylaÅŸ",
                toast: "Link kopyalandÄ±! Åimdi gÃ¶nder.",
                shareMsg: "ğŸŒ™ Ã–zel Ramazan TebriÄŸi",
                duas: [
                    "Allah bu mÃ¼barek ayda tuttuÄŸumuz oruÃ§larÄ± kabul etsin.",
                    "Ramazan ayÄ±nÄ±n hanenize bereket getirmesini dilerim.",
                    "Rabbim bizi Ramazan'a kavuÅŸturduÄŸu gibi affÄ±na da kavuÅŸtursun.",
                    "HayÄ±rlÄ±, huzurlu ve bereketli bir Ramazan dilerim."
                ]
            },
            de: {
                dir: "ltr",
                title: "Ramadan Mubarak",
                subTitle: "Willkommen im Monat der Barmherzigkeit",
                ticker: "ğŸŒ™ Besondere GrÃ¼ÃŸe zum Ramadan von Younes Al-Sheikh Abu Taym | MÃ¶ge Allah unsere guten Taten annehmen ğŸŒ™",
                to: "FÃ¼r:",
                from: "Von:",
                defaultSender: "Ein Freund",
                defaultRecipient: "Lieber Gast",
                footer: "Frohen Ramadan",
                controlsTitle: "ğŸ‘‡ Erstelle deine Karte",
                labelSender: "Dein Name (Absender):",
                labelRecipient: "EmpfÃ¤ngername:",
                placeholderSender: "z.B. Ahmed, Mama...",
                placeholderRecipient: "z.B. Lukas, Papa...",
                btnDua: "Neuer Wunsch",
                btnShare: "GruÃŸ teilen",
                toast: "Link kopiert! Jetzt senden.",
                shareMsg: "ğŸŒ™ Besondere Ramadan-GrÃ¼ÃŸe",
                duas: [
                    "MÃ¶ge Allah dein Fasten und deine Gebete annehmen.",
                    "Ich wÃ¼nsche dir einen gesegneten Ramadan voller Frieden.",
                    "MÃ¶ge dieser Monat Freude und Gesundheit bringen.",
                    "O Allah, lass uns den Ramadan erreichen und nimm unsere Taten an."
                ]
            }
        };

        let currentLang = 'ar'; // Ø§Ù„Ù„ØºØ© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©

        document.addEventListener("DOMContentLoaded", function() {
            initPage();
        });

        function initPage() {
            const urlParams = new URLSearchParams(window.location.search);
            const langParam = urlParams.get('lang');
            
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ØºØ© Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ùˆ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
            if (langParam && content[langParam]) {
                currentLang = langParam;
                document.getElementById('languageSelector').value = currentLang;
            }

            changeLanguage(currentLang); // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ØºØ©

            // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
            let sharedSender = urlParams.get('sender');
            let sharedRecipient = urlParams.get('recipient');

            const senderInput = document.getElementById('senderInput');
            const recipientInput = document.getElementById('recipientInput');
            
            if (sharedSender) {
                try {
                    senderInput.value = decodeURIComponent(sharedSender);
                } catch(e) {}
            }
            if (sharedRecipient) {
                try {
                    recipientInput.value = decodeURIComponent(sharedRecipient);
                } catch(e) {}
            }

            updateCardLive();
            randomizeDua();
        }

        function changeLanguage(lang) {
            currentLang = lang;
            const t = content[lang];
            
            // ØªØºÙŠÙŠØ± Ø§Ù„Ø§ØªØ¬Ø§Ù‡
            document.documentElement.dir = t.dir;
            document.documentElement.lang = lang;

            // ØªØºÙŠÙŠØ± Ø§Ù„Ù†ØµÙˆØµ
            document.getElementById('tickerText').textContent = t.ticker;
            document.getElementById('tickerText').className = `ticker-content ${t.dir === 'rtl' ? 'ticker-rtl' : 'ticker-ltr'}`;
            
            document.getElementById('mainTitle').textContent = t.title;
            document.getElementById('subTitle').textContent = t.subTitle;
            
            document.getElementById('toLabel').textContent = t.to;
            document.getElementById('fromLabel').textContent = t.from;
            document.getElementById('footerText').textContent = t.footer;
            
            document.getElementById('controlsTitle').textContent = t.controlsTitle;
            document.getElementById('labelSenderInput').textContent = t.labelSender;
            document.getElementById('labelRecipientInput').textContent = t.labelRecipient;
            
            document.getElementById('senderInput').placeholder = t.placeholderSender;
            document.getElementById('recipientInput').placeholder = t.placeholderRecipient;
            
            document.getElementById('btnDuaText').textContent = t.btnDua;
            document.getElementById('btnShareText').textContent = t.btnShare;

            updateCardLive(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Default names)
            randomizeDua(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ù„Ù„ØºØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        }

        function updateCardLive() {
            const t = content[currentLang];
            const senderVal = document.getElementById('senderInput').value;
            const recipientVal = document.getElementById('recipientInput').value;
            
            document.getElementById('displaySender').textContent = senderVal.trim() === "" ? t.defaultSender : senderVal;
            document.getElementById('displayRecipient').textContent = recipientVal.trim() === "" ? t.defaultRecipient : recipientVal;
        }

        function randomizeDua() {
            const duaText = document.getElementById('randomDua');
            const duaList = content[currentLang].duas;
            const randomIndex = Math.floor(Math.random() * duaList.length);
            
            duaText.style.opacity = 0;
            setTimeout(() => {
                duaText.textContent = duaList[randomIndex];
                duaText.style.opacity = 1;
            }, 300);
        }

        async function shareGreeting() {
            const senderVal = document.getElementById('senderInput').value.trim();
            const recipientVal = document.getElementById('recipientInput').value.trim();
            const t = content[currentLang];

            // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¹ Ø¨Ø§Ø±Ø§Ù…ØªØ± Ø§Ù„Ù„ØºØ©
            const baseUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
            const shareUrl = `${baseUrl}?sender=${encodeURIComponent(senderVal)}&recipient=${encodeURIComponent(recipientVal)}&lang=${currentLang}`;
            
            const shareTitle = t.title;
            const displayName = senderVal || t.defaultSender;
            const displayTarget = recipientVal || t.defaultRecipient;
            
            const shareText = `${t.shareMsg}\n${t.from} ${displayName}\n${t.to} ${displayTarget}\n\nğŸ‘‡`;

            if (navigator.share) {
                try {
                    await navigator.share({
                        title: shareTitle,
                        text: shareText,
                        url: shareUrl
                    });
                } catch (err) {
                    console.log('Error sharing:', err);
                }
            } else {
                copyToClipboard(shareUrl);
            }
        }

        function copyToClipboard(text) {
            const toast = document.getElementById('toast');
            const t = content[currentLang];
            
            navigator.clipboard.writeText(text).then(() => {
                toast.textContent = t.toast;
                toast.className = "show";
                setTimeout(function(){ toast.className = toast.className.replace("show", ""); }, 3000);
            }, () => {
                prompt("Copy link:", text);
            });
        }
    </script>
</body>
</html>
